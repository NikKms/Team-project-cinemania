!function(){function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},o=n.parcelRequire8a95;null==o&&((o=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},n.parcelRequire8a95=o),o.register("iE7OH",(function(t,n){var a,r;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var o={};a=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},r=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("aNJCr",(function(t,n){var a;e(t.exports,"getBundleURL",(function(){return a}),(function(e){return a=e}));var r={};function o(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}a=function(e){var t=r[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),r[e]=t),t}})),o("iE7OH").register(JSON.parse('{"gin8l":"catalog.5a2a4ac6.js","ee16w":"sprite.486e8ae6.svg","cUNoC":"catalog.e6872f05.css","hr6dX":"my-lib-page.057fb8ff.js"}')),o("i6wQM");var i=o("bpxeT"),c=o("2TvXO"),s={pagination:document.getElementById("pagination"),catalogSection:document.querySelector(".catalog"),catalogFilms:document.querySelector(".catalog-films"),searchForm:document.querySelector(".search-form"),selectGenres:document.querySelector("#selectGenres"),selectDate:document.querySelector("#selectDate"),btnClear:document.querySelector(".search-clear-btn"),input:document.getElementById("search-form"),btnSearch:document.querySelector(".search-btn"),inputIcon:document.querySelector(".input-icon")},u=(o("bpxeT"),o("2TvXO"),o("bpxeT"),o("8MBJY")),l=o("a2hTj"),p=o("hKHmD"),d=o("8nrFW"),g=(o("2TvXO"),i=o("bpxeT"),c=o("2TvXO"),function(e){var t=document.querySelector(".no-movie-found");null!==t&&t.remove();var n,a=e.map((function(e){return'<li data-id="'.concat(e.id,'" class="catalog-card is-id">\n  <img\n    src="https://image.tmdb.org/t/p/original').concat(e.poster,'"\n    alt="').concat(e.title,'"\n    loading="lazy"\n  />\n  <div class="catalog-overlay"></div>\n  <div class="catalog-info">\n    <h3 class="catalog-info-name">').concat(e.title,'</h3>\n    <div class="catalog-info-date">\n      <p class="catalog-info-details">').concat(e.genres," | ").concat(e.date,'</p>\n      <div\n        class="Stars stars-five"\n        style="--rating: ').concat(e.rating,'"\n        aria-label="Rating of this product is 2.3 out of 5."\n      ></div>\n    </div>\n  </div>\n</li>')})).join("");if(!a.length){var r=v();return s.catalogFilms.insertAdjacentHTML("beforebegin",r),void(s.catalogFilms.innerHTML="")}n=a,s.catalogFilms.innerHTML=n}),v=function(){return'<div class="no-movie-found">\n    <p class="no-movie-found__text">\n      <span class="no-movie-found__text-item">OOPS...</span>\n      <span class="no-movie-found__text-item">We are very sorry!</span>\n      <span class="no-movie-found__text-item">\n        We donâ€™t have any results matching your search.\n      </span>\n    </p>\n  </div>'};var f,h,m=(f=t(i)(t(c).mark((function e(n){var a,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:a=e.sent,r=n.map((function(e){var t=e.id,n=e.title,r=e.poster_path,o=e.vote_average,i=e.genre_ids,c=e.release_date;return{id:t,title:n,poster:r,rating:o,genres:w(a,i),date:y(c)}})),g(r);case 5:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)}),w=function(e,t){var n=[];return e.map((function(e){var a=e.id,r=e.name;-1!==t.indexOf(a)&&n.push(r)})),n.slice(0,2).join(", ")},y=function(e){return new Date(e).getFullYear()},b=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},P=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};h=o("aNJCr").getBundleURL("gin8l")+o("iE7OH").resolve("ee16w");var x=function(){"use strict";function e(n,a){var r=n.totalPages,o=n.page,l=n.parentSection,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],v=this;t(u)(this,e);var f=this;t(p)(this,"createButton",t(i)(t(c).mark((function e(){var n;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.totalPages<=1)){e.next=3;break}return f.reset(),e.abrupt("return");case 3:f.arrPaginationItems=[],f.addFirstPages(f.arrPaginationItems),f.totalPages>6&&(f.addEllipsisIfNeeded(f.arrPaginationItems),f.addMiddlePages(f.arrPaginationItems),f.addEllipsisIfNeeded(f.arrPaginationItems,!0),f.addLastPage(f.arrPaginationItems)),n=f.createPagination(f.arrPaginationItems.join("")),f.render(n),b("currentPage",f.currentPage);case 9:case"end":return e.stop()}}),e)})))),t(p)(this,"addFirstPages",(function(e){for(var t=1;t<=Math.min(3,v.totalPages);t++){var n=v.currentPage===t?"btn-active":"",a=v.createPaginationItem("0"+t,n);e.push(a)}})),t(p)(this,"addMiddlePages",(function(e){for(var t=Math.max(4,v.currentPage-2),n=Math.min(v.currentPage+1,v.totalPages-1),a=t;a<=n;a++){var r=v.currentPage===a?"btn-active":"",o=[];o=a<=9?v.createPaginationItem("0"+a,r):v.createPaginationItem(a,r),e.push(o)}})),t(p)(this,"addEllipsisIfNeeded",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t&&v.currentPage<v.totalPages-2||!t&&v.currentPage>3)&&e.push('<li class="pagination-item ellipsis">...</li>')})),t(p)(this,"addLastPage",(function(e){var t=v.totalPages,n=v.currentPage===t?"btn-active":"",a=v.createPaginationItem(t,n);e.push(a)})),t(p)(this,"createPaginationItem",(function(e,t){return"<li class='pagination-item ".concat(t,"'>\n              <a href='#' data-page='").concat(e,"' class='pagination-btn'>").concat(e,"</a>\n            </li>")})),t(p)(this,"createPagination",(function(e){return"\n      <div class='pagination ".concat(v.totalPages<=1?"pagination-hidden":"","'>\n      <button type=\"button\" class='pagination-arrow pagination-arrows-prev").concat(v.totalPages<=1?"pagination-arrows-hidden":"",'\'><svg class="icon" width="32" height="32">\n      <use href="').concat(t(h),"#icon-arrow-prev\"></use>\n    </svg></button>\n        <ul class='pagination-list'>").concat(e,'</ul>\n        <button type="button" class=\'pagination-arrow pagination-arrows-next').concat(v.totalPages<=1?"pagination-arrows-hidden":"",'\'><svg class="icon" width="32" height="32">\n        <use href="').concat(t(h),'#icon-arrow-next"></use>\n      </svg></button>\n      </div>')})),t(p)(this,"render",(function(e){v.reset(),s.catalogFilms.insertAdjacentHTML("afterend",e);var t=document.querySelector(".pagination"),n=document.querySelector(".pagination");t.addEventListener("click",v.handlerBtn),n.addEventListener("click",v.arrowHandler);var a=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===v.currentPage?a.style.display="none":a.style.display="block";var r=document.querySelector(".pagination-arrow.pagination-arrows-next");v.currentPage===v.totalPages?r.style.display="none":r.style.display="block"})),t(p)(this,"arrowHandler",(function(e){var t=e.target;t.classList.contains("pagination-arrows-prev")&&v.prev(),t.classList.contains("pagination-arrows-next")&&v.next()})),t(p)(this,"reset",(function(){var e=document.querySelector(".pagination");e&&e.remove()})),t(p)(this,"scrollToTop",(function(){void 0!==v.parentSection&&v.parentSection.scrollIntoView({behavior:"instant"})}));var m=this;t(p)(this,"prev",t(i)(t(c).mark((function e(){var n;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==m.currentPage){e.next=2;break}return e.abrupt("return");case 2:return m.currentPage-=1,m.createButton(),e.next=6,m.getMovies.apply(m,[m.currentPage].concat(t(d)(m.params)));case 6:m.scrollToTop(),n=document.querySelector(".pagination-arrow.pagination-arrows-prev"),1===m.currentPage?n.style.display="none":n.style.display="block";case 9:case"end":return e.stop()}}),e)}))));var w=this;t(p)(this,"next",t(i)(t(c).mark((function e(){var n;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.currentPage!==w.totalPages){e.next=2;break}return e.abrupt("return");case 2:return w.currentPage+=1,w.createButton(),e.next=6,w.getMovies.apply(w,[w.currentPage].concat(t(d)(w.params)));case 6:w.scrollToTop(),n=document.querySelector(".pagination-arrow.pagination-arrows-next"),w.currentPage===w.totalPages?n.style.display="none":n.style.display="block";case 9:case"end":return e.stop()}}),e)}))));var y=this;t(p)(this,"handlerBtn",function(){var e=t(i)(t(c).mark((function e(n){var a;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=parseInt(n.target.dataset.page),isNaN(a)){e.next=8;break}return y.currentPage=a,y.createButton(),e.next=7,y.getMovies.apply(y,[y.currentPage].concat(t(d)(y.params)));case 7:y.scrollToTop();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.totalPages=r,this.currentPage=o,this.parentSection=l,this.getMovies=a,this.params=g,this.arrPaginationItems=[]}return t(l)(e,[{key:"updatePage",value:function(e){this.currentPage=e,this.createButton()}}]),e}(),S=o("jyO6b"),_=o("dIxxU"),k=o("3KAdz"),T="88b8a7c5d221d3120fb29d734050dc7d";function L(e){return E.apply(this,arguments)}function E(){return(E=t(i)(t(c).mark((function e(n){var a;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,k.onLoader)(),e.next=4,_.default.get(n);case 4:return a=e.sent,(0,k.removeLoader)(),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),(0,k.removeLoader)(),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var I=function(){var e=t(i)(t(c).mark((function e(n){var a,r,o,i,u,l,p=arguments;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:1,r=p.length>2&&void 0!==p[2]?p[2]:"",s.selectGenres.disabled=!0,s.selectDate.disabled=!1,e.next=5,(0,S.getByQuery)(n,a,r);case 5:return o=e.sent,i=o.results,u=o.total_pages,l=o.page,m(i),e.abrupt("return",{results:i,total_pages:u,page:l});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=t(i)(t(c).mark((function e(n){var a,r,o,i,u,l=arguments;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,s.selectGenres.disabled=!1,s.selectDate.disabled=!0,e.next=5,L("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(T,"&page=").concat(n).concat(a?"&with_genres=".concat(a):"","&language=en-US"));case 5:return r=e.sent.data,o=r.results,i=r.page,u=r.total_pages,m(o),e.abrupt("return",{results:o,page:i,total_pages:u});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=t(i)(t(c).mark((function e(){var n,a;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(T));case 2:return n=e.sent.data,a=n.genres,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=document.querySelector(".search-form"),H=document.querySelector("#selectGenres"),F=document.querySelector("#selectDate"),B=function(){var e=t(i)(t(c).mark((function e(){var n,a,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(1);case 2:n=e.sent,a=n.page,r=n.total_pages,new x({totalPages:r,page:a,parentSection:s.catalogSection},q).createButton();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=t(i)(t(c).mark((function e(n){var a,r,o,i;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("searchTerm"),e.next=3,I(1,a);case 3:r=e.sent,o=r.page,i=r.total_pages,new x({totalPages:i,page:o,parentSection:s.catalogSection},I,[a,1]).createButton(),F.removeAttribute("disabled");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=t(i)(t(c).mark((function e(){var n,a;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,(a=n.map((function(e){return'<option value="'.concat(e.id,'">').concat(e.name,"</option>")}))).unshift("<option value='all'>All</option>"),H.innerHTML=a.join(""),H.removeAttribute("disabled");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=t(i)(t(c).mark((function e(n){var a,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,e.next=3,q(1,n.target.value);case 3:r=e.sent.total_pages,new x({totalPages:r,page:1,parentSection:s.catalogSection},q,[a]).createButton();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=t(i)(t(c).mark((function e(n){var a,r,o;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,r=P("searchTerm"),e.next=4,I(1,r,a);case 4:o=e.sent.total_pages,new x({totalPages:o,page:1,parentSection:s.catalogSection},I,[r,a]).createButton();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();O.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()).searchMovies;n.length?(b("searchTerm",n),j(n)):B()})),window.addEventListener("load",B),window.addEventListener("load",D),window.addEventListener("load",(function(){for(var e=[],t=(new Date).getFullYear();t>=1970;t--)e.push('<option value="'.concat(t,'">').concat(t,"</option>"));F.innerHTML=e.join("")})),H.addEventListener("change",N),F.addEventListener("change",A),O.querySelector("input").addEventListener("input",(function(e){var t=e.target.value;H.disabled=!0,t.length||(H.disabled=!1)})),o("i6wQM"),o("1TFAy"),o("hVzVa"),o("h8OCG"),s.btnClear.addEventListener("click",(function(){s.input.value=""})),s.input.addEventListener("input",(function(){""===s.input.value?s.inputIcon.classList.add("icon-hidden"):s.inputIcon.classList.remove("icon-hidden")})),o("3XXFj")}();
//# sourceMappingURL=catalog.5a2a4ac6.js.map
