function n(n,t,e,a){Object.defineProperty(n,t,{get:e,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},a={},o=t.parcelRequire8a95;null==o&&((o=function(n){if(n in e)return e[n].exports;if(n in a){var t=a[n];delete a[n];var o={id:n,exports:{}};return e[n]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(n,t){a[n]=t},t.parcelRequire8a95=o),o.register("cl7Eh",(function(t,e){n(t.exports,"clearLibrary",(function(){return s})),n(t.exports,"addFilmToStorage",(function(){return i})),n(t.exports,"parsedFilms",(function(){return d})),n(t.exports,"parsedFilmsGenreIds",(function(){return c}));var a=o("7Y9D8");o("1YlWm");const r=JSON.parse(localStorage.getItem("films"))||[],s=()=>{localStorage.removeItem("films")},i=n=>{const t=n.id;if(!r.some((({id:n})=>n===t)))return r.unshift(n),localStorage.setItem("films",JSON.stringify(r)),void a.Notify.success("Film was added to library successfully");alert("!!!")},d=(()=>{try{const n=localStorage.getItem("films");return JSON.parse(n)||[]}catch(n){console.error(n)}})(),c=[...new Set(d.flatMap((({genres:n})=>n.map((({id:n})=>n)))))]})),o.register("1YlWm",(function(t,e){n(t.exports,"libRefs",(function(){return a}));const a={libSelectEl:document.getElementById("js-genre-select"),libMoviesListEl:document.getElementById("js-lib-list"),libLoadMoreBtn:document.getElementById("js-loadMore-btn"),libClearBtn:document.getElementById("clear-lib-btn")}})),o.register("70ClL",(function(n,t){var e=o("g7hbw"),a=o("19F3f"),r=(a=o("19F3f"),o("cl7Eh"));o("kEbcv");var s=o("a51SH");const i={openModal:document.querySelector("[data-modal-open]"),closeModal:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),upcomingWrapLi:document.querySelector(".modal-info"),addToLibBtn:null};function d(){window.removeEventListener("keydown",c),e.swiper.autoplay.start(),document.body.classList.remove("not-scroll-body"),i.backdrop.classList.add("is-hidden")}function c(n){"Escape"===n.code&&d()}document.addEventListener("click",(function(n){const t=n.target.closest(".is-id");if(null===t)return;(async function(n){!async function(n){console.log(n);const{poster_path:t,backdrop_path:e,genres:a,overview:o,popularity:d,title:c,vote_average:l,vote_count:p,id:u}=n,m=a.map((n=>n.id)),g=await(0,s.getGenresById)(m);let v="";v=null!==t?`https://image.tmdb.org/t/p/original/${t}`:null!==e?`https://image.tmdb.org/t/p/original/${e}`:"https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787";const f=`\n    <div class="modal-card">\n      <img\n        class="modal-img"\n        src="${v}"\n        alt=" "\n      />\n\n      <div class="modal-card-wrap">\n        <h3 class="modal-card-title">${c}</h3>\n\n          <div class="modal-card-vote-wrap">\n            <div class="modal-card-vote color-description"><span>Vote / Votes</span></div>\n            <div class="modal-card-vote-data">\n              <span>${l.toFixed(1)}</span> / <span>${p}</span>\n            </div>\n          </div>\n        \n          <div class="modal-card-popularity-wrap">\n            <span class="modal-card-popularity-text color-description">Popularity</span>\n            <span class="modal-card-popularity-data"\n              >${d.toFixed(1)}</span\n            >\n          </div>\n\n          <div class="modal-card-genre-wrap">\n            <span class="modal-card-genre-text color-description">Genre</span>\n            <span class="modal-card-genre-data">${g}</span>\n          </div>\n        \n        <span class="modal-card-about-title color-description">About</span>\n\n        <p class="modal-card-about-text">${o}</p>\n\n        <button class="modal-button gap-right" type="button"><span>Add to my library</span></button>\n         <button type="button" class=" modal-button hero-btn-trailer" id="hero-btn-trailer" data-id="${u}">\n    Watch trailer\n  </button>\n      </div>\n    </div>`;i.upcomingWrapLi.innerHTML=f,i.addToLibBtn=document.querySelector(".modal-button");const y=t=>{(0,r.addFilmToStorage)(n),t.currentTarget.textContent="!!"};i.addToLibBtn.addEventListener("click",y)}(await(0,a.getInfoByMovie)(n))})(t.dataset.id),e.swiper.autoplay.stop(),document.body.classList.add("not-scroll-body"),window.addEventListener("keydown",c),i.backdrop.classList.remove("is-hidden")})),i.closeModal.addEventListener("click",d),i.backdrop.addEventListener("click",(function(n){n.currentTarget===n.target&&d()}))})),o.register("a51SH",(function(t,e){n(t.exports,"getGenresById",(function(){return i})),o("70ClL");var a=o("19F3f");o("19F3f"),a=o("19F3f");const r=document.querySelector(".weekly-cards-wrap"),s=document.querySelector(".upcoming_wrap");async function i(n){const t=(await(0,a.getGenre)()).genres;return n.map((n=>{const e=t.find((t=>t.id===n));return e?e.name:""})).join(", ")}function d(n){return n.length>2?n.slice(0,2):n}document.querySelector(".weekly-title-link").addEventListener("click",(()=>{location.href="catalog.html"})),window.addEventListener("DOMContentLoaded",(async function(){const{formattedStartDate:n,formattedEndDate:t}=function(){const n=new Date,t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),o=`${t}-${e}-${a}`,r=new Date(t,e,1),s=new Date(r-1).getDate(),i=String(s).padStart(2,"0");return{formattedStartDate:o,formattedEndDate:`${t}-${e}-${i}`}}();try{const e=await(0,a.getUpcoming)(n,t);!async function(n){let{backdrop_path:t,poster_path:e,genre_ids:a,popularity:o,release_date:r,title:c,vote_average:l,vote_count:p,overview:u}=n;a=d(a);const m=await i(a),g=window.innerWidth<767;const v=`<div class="upcoming-card">\n\n            <img class="upcoming-card-img" src="${function(n,t,e){return!0===e&&null!==t?`https://image.tmdb.org/t/p/original/${t}`:!1===e&&null!==n?`https://image.tmdb.org/t/p/original/${n}`:!1===e&&null===n&&null!==t?`https://image.tmdb.org/t/p/original/${t}`:!0===e&&null===t&&null!==n?`https://image.tmdb.org/t/p/original/${n}`:"https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787"}(t,e,g)}" alt=" " />\n\n          <div class="upcoming-card-wrap">\n            <h3 class="upcoming-card-title">${c}</h3>\n\n            <div class="upcoming-card-numbers-wrap-top">\n              <div class="upcoming-card-release-wrap">\n                <span class="upcoming-card-release-text">Release date</span>\n                <span class="upcoming-card-release-data">${r}</span>\n              </div>\n\n              <div class="upcoming-card-vote-wrap">\n                <div class="upcoming-card-vote"><span>Vote / Votes</span></div>\n                <div class="upcoming-card-vote-data">\n                  <span>${l}</span> / <span>${p}</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="upcoming-card-numbers-wrap-down">\n              <div class="upcoming-card-popularity-wrap">\n                <span class="upcoming-card-popularity-text">Popularity</span>\n                <span class="upcoming-card-popularity-data">${o.toFixed(1)}</span>\n              </div>\n\n              <div class="upcoming-card-genre-wrap">\n                <span class="upcoming-card-genre-text">Genre</span>\n                <span class="upcoming-card-genre-data">${m}</span>\n              </div>\n            </div>\n \n            <span class="upcoming-card-about-title">About</span>\n\n            <p class="upcoming-card-about-text">${u}</p>\n\n            <button class="upcoming-button" type="button">\n              Add to my library\n            </button>\n          </div>\n        </div>`;s.insertAdjacentHTML("beforeend",v)}(function(n){const t=Math.floor(Math.random()*n.length);return n[t]}(e.results))}catch(n){s.insertAdjacentHTML("beforeend",'<p class="upcoming-not-found">OOPS...We are very sorry! We donâ€™t have any results</p>')}})),window.addEventListener("DOMContentLoaded",(async function(){!async function(n){console.log(n);const t=await Promise.all(n.map((async({backdrop_path:n,title:t,release_date:e,genre_ids:a,id:o,poster_path:r,name:s,first_air_date:c,vote_average:l})=>{a=d(a);return`<li class="weekly-card is-id" data-id=${o}>\n        <div class="weekly-container-image">\n          <img\n            class="weekly-card-image"\n           src="https://image.tmdb.org/t/p/original/${r}"\n            alt=""\n          />\n         <div class="overlay"></div>       \n        </div>\n  <div class="weekly-card-description">\n    <h3 class="weekly-card-description-title">${t||s}</h3>\n    <div class='weekly-card-description-wrap'>\n       <p class="weekly-card-description-other">${await i(a)} | ${e?e.substring(0,4):c.substring(0,4)}</p>\n\n     <div class="Stars" style="--rating: ${parseFloat((l/2).toFixed(1))};" aria-label="Rating of this product is 2.3 out of 5."></div>\n      </div>\n  </div>\n      </li>`})));r.innerHTML=t.join("")}((await(0,a.getWeeklyTrending)()).results.slice(0,3))}))}));
//# sourceMappingURL=my-lib-page.e5099942.js.map
