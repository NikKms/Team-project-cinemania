{"mappings":"2iBAAA,IAAAA,EAAAC,EAAA,UCGA,GAHAD,EAAAC,EAAA,UAGAC,eAAcC,MAAKC,GACjBC,aAAaC,QAAQ,OAAQC,KAAKC,UAAUJ,EAASK,YAGvD,MASMC,EATiB,MACrB,IACE,MAAMC,EAAWN,aAAaO,QAAQ,QACtC,OAAOL,KAAKM,MAAMF,E,CAClB,MAAOG,GACPC,QAAQD,MAAMA,E,GAIEE,GACdC,EAAsBP,EAAYQ,SAAQ,EAACC,UAAEA,KAAgBA,ICjB7DC,EAAU,CACdC,YAAaC,SAASC,eAAe,mBACrCC,gBAAiBF,SAASC,eAAe,eACzCE,eAAgBH,SAASC,eAAe,qBCApCF,YAAEK,EAAWF,gBAAEG,EAAeF,eAAEG,GAAmBR,EAwCnDS,EAAwBC,IAC5B,MAAMC,EAAqBD,EAAUE,KAAIC,GAvCb,CAAAA,GACrB,kBAAkBA,EAAMC,OAAOD,EAAME,gBAuC1CC,CAAsBH,KAExBP,EAAYW,mBAAmB,YAAaN,EAAmBO,KAAK,KAAK,EAGrEC,EAA4BC,MAAMC,IACtC,MAAMC,QAA2BC,QAAQC,IACvCH,EAAOT,KAAIQ,MAAMK,QA3CaL,QAAOM,MACvCA,EAAKX,KACLA,EAAIY,aACJA,EAAYC,eACZA,EAAc7B,UACdA,EAAS8B,YACTA,EAAWC,aACXA,MAEA,MACMC,EAAaL,GAASX,EAE5B,MAAO,yHAEwCc,WAAqBE,uGAGhCA,oDARXC,EAAajC,SAEb4B,GAAgBC,GAO2BK,UAClE,EACA,sIAKQH,EAAe,+CAEvBA,EAAe,GACfI,QAAQ,gDAGN,EAY8BC,CAA0BV,MAE5DlB,EAAgBU,mBAAmB,YAAaK,EAAmBJ,KAAK,KAAK,E,SCrD/EkB,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,QACR,SAAyBC,EAAKC,EAAKH,GAC3BG,KAAOD,EACPL,OAAOC,eAAeI,EAAKC,EAAK,CAC5BH,MAAOA,EACPI,YAAY,EACZC,cAAc,EACdC,UAAU,IAGdJ,EAAIC,GAAOH,EAEf,OAAOE,C,EChBX,MAAMK,EAUJC,OAAOC,GACL,OAAO9C,SAAS+C,cAAcD,E,CAGhCE,UACEC,KAAKC,OAAOC,UAAUC,IAAIR,EAAYS,QAAQC,O,CAGhDC,UACEN,KAAKC,OAAOC,UAAUK,OAAOZ,EAAYS,QAAQC,O,CAGnDG,aACER,KAAKC,OAAOQ,UAAW,EACvBT,KAAKC,OAAOS,YAAc,Y,CAG5BC,YACEX,KAAKC,OAAOQ,UAAW,EACvBT,KAAKC,OAAOS,YAAc,W,CAxB5BE,aAAYC,MAAEA,EAAKC,SAAEA,GAAW,IAC9Bd,KAAKC,OAASY,EACdC,GAAYd,KAAKD,S,EANnBgB,EAAA5B,EAAA,CADIQ,EACG,UAAU,CACfU,OAAQ,mBLOZ,MAAMvD,YAAEkE,EAAW/D,gBAAEgE,EAAe/D,eAAEgE,GAAmBrE,EAEnDsE,EAAW,IAAIxB,EAAY,CAC/BkB,MAAOK,IAGT,IAAIE,EAAgB,IAEpB,IAAIC,EAAoB,EAExB,MAAMC,EAAoBrD,MAAMsD,IAC9B,MAAMC,OAAEA,SAAiB,EAAA/F,EAAAgG,YACzB,OAAOD,EAAOE,QAAO,EAAC/D,GAAEA,KAAS4D,EAAeI,SAAShE,IAAI,EAGzDkB,EAAeZ,MAAM2D,UACIN,EAAkBM,IACbnE,KAAI,EAACG,KAAEA,KAAWA,IAClCiE,MAAM,EAAG,GAAG9D,KAAK,MAG/B+D,EAAuB7D,MAAMsD,IACjC,MAAMQ,QAAuBT,EAAkBC,GAC/CjE,EAAsByE,EAAe,EAGjCC,EAAaC,IACjB,MAAMC,EAAYD,EAAUJ,MAC1BR,EACAA,EAtBgB,GAyBlBA,GAzBkB,EA0BlBrD,EAA0BkE,EAAU,EAUhCC,EAAoBC,IACxBC,EAAwBD,EAAc,EAGlCC,EAA0BD,IAC9B,GAAsB,MAAlBA,EACFJ,EAAW7F,GACXmG,EAAenG,OACV,CACL,MAAMoG,EAAkBpG,EAAYuF,QAAO,EAAC9E,UAAEA,KAC5CA,EAAU+E,SAASa,SAASJ,MAE9BJ,EAAWO,GACXD,EAAeC,E,GAIbD,EAAiBL,IACjBA,EAAUQ,QAAUpB,EACtBF,EAASpB,UAEToB,EAASb,SAAS,EAUhBoC,EAAY,KAChBzB,EAAgB0B,UAAY,EAAE,EAGhC3B,EAAY4B,iBAAiB,UA1CH,KACxBxB,EAAgBJ,EAAY5B,MAC5BiC,EAAoB,EACpBqB,IACAP,EAAkBf,EAAc,IAwClCyB,OAAOD,iBAAiB,QAAQ3E,gBACxB6D,EAAqBpF,GAC3BsF,EAAW7F,EAAY,IAGzB+E,EAAe0B,iBAAiB,SAjBT,KACrBzB,EAASX,aACT2B,EAAkBf,GAClBD,EAASR,WAAW,I","sources":["src/partials/js/my-lib/lib-main.js","src/partials/js/my-lib/lib-storage.js","src/partials/js/my-lib/lib-refs.js","src/partials/js/my-lib/lib-markups.js","node_modules/@swc/helpers/lib/_define_property.js","src/partials/js/my-lib/loadMoreBtn.js"],"sourcesContent":["import { getGenre } from '../api';\nimport { parsedFilms, parsedFilmsGenreIds } from './lib-storage';\nimport {\n  renderLibMoviesListMarkup,\n  renderLibSelectMarkup,\n} from './lib-markups';\nimport { libRefs } from './lib-refs';\nimport { LoadMoreBtn } from './loadMoreBtn';\n\nconst { libSelectEl, libMoviesListEl, libLoadMoreBtn } = libRefs;\n\nconst loadMore = new LoadMoreBtn({\n  btnEl: libLoadMoreBtn,\n});\n\nlet selectedGenre = '1';\nconst movieByStep = 9;\nlet totalMoviesLoaded = 0;\n\nconst getFilteredGenres = async moviesGenreIds => {\n  const { genres } = await getGenre();\n  return genres.filter(({ id }) => moviesGenreIds.includes(id));\n};\n\nconst getGenreName = async movieGenreIds => {\n  const filteredGenres = await getFilteredGenres(movieGenreIds);\n  const genreNames = filteredGenres.map(({ name }) => name);\n  return genreNames.slice(0, 2).join(', ');\n};\n\nconst renderFilteredGenres = async moviesGenreIds => {\n  const filteredGenres = await getFilteredGenres(moviesGenreIds);\n  renderLibSelectMarkup(filteredGenres);\n};\n\nconst loadMovies = moviesArr => {\n  const slicedArr = moviesArr.slice(\n    totalMoviesLoaded,\n    totalMoviesLoaded + movieByStep\n  );\n\n  totalMoviesLoaded += movieByStep;\n  renderLibMoviesListMarkup(slicedArr);\n};\n\nconst onLibSelectChange = () => {\n  selectedGenre = libSelectEl.value;\n  totalMoviesLoaded = 0;\n  clearHTML();\n  loadMoviesByGenre(selectedGenre);\n};\n\nconst loadMoviesByGenre = selectedValue => {\n  filterMoviesListByGenre(selectedValue);\n};\n\nconst filterMoviesListByGenre = selectedValue => {\n  if (selectedValue === '1') {\n    loadMovies(parsedFilms);\n    checkArrLength(parsedFilms);\n  } else {\n    const moviesGenreById = parsedFilms.filter(({ genre_ids }) =>\n      genre_ids.includes(parseInt(selectedValue))\n    );\n    loadMovies(moviesGenreById);\n    checkArrLength(moviesGenreById);\n  }\n};\n\nconst checkArrLength = moviesArr => {\n  if (moviesArr.length <= totalMoviesLoaded) {\n    loadMore.hideBtn();\n  } else {\n    loadMore.showBtn();\n  }\n};\n\nconst onLoadBtnClick = () => {\n  loadMore.disableBtn();\n  loadMoviesByGenre(selectedGenre);\n  loadMore.enableBtn();\n};\n\nconst clearHTML = () => {\n  libMoviesListEl.innerHTML = '';\n};\n\nlibSelectEl.addEventListener('change', onLibSelectChange);\n\nwindow.addEventListener('load', async () => {\n  await renderFilteredGenres(parsedFilmsGenreIds);\n  loadMovies(parsedFilms);\n});\n\nlibLoadMoreBtn.addEventListener('click', onLoadBtnClick);\n\nexport { getGenreName };\n","import {getTrending} from \"../api\"\n\n\ngetTrending().then(response =>\n  localStorage.setItem('test', JSON.stringify(response.results))\n);\n\nconst getParsedFilms = () => {\n  try {\n    const filmsArr = localStorage.getItem('test');\n    return JSON.parse(filmsArr);\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst parsedFilms = getParsedFilms();\nconst parsedFilmsGenreIds = parsedFilms.flatMap(({ genre_ids }) => genre_ids);\n\nexport { parsedFilms, parsedFilmsGenreIds };\n","const libRefs = {\n  libSelectEl: document.getElementById('js-genre-select'),\n  libMoviesListEl: document.getElementById('js-lib-list'),\n  libLoadMoreBtn: document.getElementById('js-loadMore-btn'),\n};\n\nexport { libRefs };\n","import { libRefs } from './lib-refs';\nimport { getGenreName } from './lib-main';\n\nconst { libSelectEl, libMoviesListEl, libLoadMoreBtn } = libRefs;\n\nconst createLibSelectMarkup = genre => {\n  return `<option value=\"${genre.id}\">${genre.name}</option>`;\n};\n\nconst createLibMoviesListMarkup = async ({\n  title,\n  name,\n  release_date,\n  first_air_date,\n  genre_ids,\n  poster_path,\n  vote_average,\n}) => {\n  const genreNames = await getGenreName(genre_ids);\n  const movieTitle = title || name;\n  const movieReleaseYear = release_date || first_air_date;\n  return ` <li class=\"mylibrary_movie is-id\">\n  <div class=\"mylibrary_poster\">\n  <img src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${movieTitle}\" />\n      <div class=\"mylibrary_move_dark\"></div>\n  </div>\n  <h3 class=\"mylibrary_movies_name\">${movieTitle}</h3>\n  <p class=\"mylibrary_genre_movie\">${genreNames} | ${movieReleaseYear.substring(\n    0,\n    4\n  )}</p>\n  <div class=\"hero-star-raiting\" data-swiper-parallax=\"-350\">\n      <span>\n          <div class=\"Stars\" style=\"--rating: ${\n            vote_average / 2\n          }; \" aria-label=\"Rating of this product is ${(\n    vote_average / 2\n  ).toFixed(1)} out of 5.\">\n      </span>\n  </div>\n</li>`;\n};\n\nconst renderLibSelectMarkup = genresArr => {\n  const libSelectMarkupEls = genresArr.map(genre =>\n    createLibSelectMarkup(genre)\n  );\n  libSelectEl.insertAdjacentHTML('beforeend', libSelectMarkupEls.join(' '));\n};\n\nconst renderLibMoviesListMarkup = async movies => {\n  const libMovieListMarkup = await Promise.all(\n    movies.map(async movie => await createLibMoviesListMarkup(movie))\n  );\n  libMoviesListEl.insertAdjacentHTML('beforeend', libMovieListMarkup.join(' '));\n};\n\nexport { renderLibMoviesListMarkup, renderLibSelectMarkup };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","class LoadMoreBtn {\n  static classes = {\n    hidden: 'lib-btn-hidden',\n  };\n\n  constructor({ btnEl, isHidden = false }) {\n    this.button = btnEl;\n    isHidden && this.hideBtn();\n  }\n\n  getBtn(selector) {\n    return document.querySelector(selector);\n  }\n\n  hideBtn() {\n    this.button.classList.add(LoadMoreBtn.classes.hidden);\n  }\n\n  showBtn() {\n    this.button.classList.remove(LoadMoreBtn.classes.hidden);\n  }\n\n  disableBtn() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n\n  enableBtn() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load more';\n  }\n}\n\nexport { LoadMoreBtn };\n"],"names":["$19F3f","parcelRequire","getTrending","then","response","localStorage","setItem","JSON","stringify","results","$8fbd6111e242142d$export$c118d883ed694a49","filmsArr","getItem","parse","error","console","$8fbd6111e242142d$var$getParsedFilms","$8fbd6111e242142d$export$c149f286d6cc84b6","flatMap","genre_ids","$16fc69f3f69317b5$export$a53e322463ec8607","libSelectEl","document","getElementById","libMoviesListEl","libLoadMoreBtn","$bc82bf5bb67ef049$var$libSelectEl","$bc82bf5bb67ef049$var$libMoviesListEl","$bc82bf5bb67ef049$var$libLoadMoreBtn","$bc82bf5bb67ef049$export$c692ee4cf6f33e4e","genresArr","libSelectMarkupEls","map","genre","id","name","$bc82bf5bb67ef049$var$createLibSelectMarkup","insertAdjacentHTML","join","$bc82bf5bb67ef049$export$2bb7f8c502c8b895","async","movies","libMovieListMarkup","Promise","all","movie","title","release_date","first_air_date","poster_path","vote_average","movieTitle","$bf5bbfa7cc2fd989$export$e1e489d92e562b7b","substring","toFixed","$bc82bf5bb67ef049$var$createLibMoviesListMarkup","Object","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$ffaaa39bb1dd764a$export$fa7cf5edad276a21","getBtn","selector","querySelector","hideBtn","this","button","classList","add","classes","hidden","showBtn","remove","disableBtn","disabled","textContent","enableBtn","constructor","btnEl","isHidden","$parcel$interopDefault","$bf5bbfa7cc2fd989$var$libSelectEl","$bf5bbfa7cc2fd989$var$libMoviesListEl","$bf5bbfa7cc2fd989$var$libLoadMoreBtn","$bf5bbfa7cc2fd989$var$loadMore","$bf5bbfa7cc2fd989$var$selectedGenre","$bf5bbfa7cc2fd989$var$totalMoviesLoaded","$bf5bbfa7cc2fd989$var$getFilteredGenres","moviesGenreIds","genres","getGenre","filter","includes","movieGenreIds","slice","$bf5bbfa7cc2fd989$var$renderFilteredGenres","filteredGenres","$bf5bbfa7cc2fd989$var$loadMovies","moviesArr","slicedArr","$bf5bbfa7cc2fd989$var$loadMoviesByGenre","selectedValue","$bf5bbfa7cc2fd989$var$filterMoviesListByGenre","$bf5bbfa7cc2fd989$var$checkArrLength","moviesGenreById","parseInt","length","$bf5bbfa7cc2fd989$var$clearHTML","innerHTML","addEventListener","window"],"version":3,"file":"my-lib-page.bfd50229.js.map"}