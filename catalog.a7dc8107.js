!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire8a95;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire8a95=r),r("i6wQM");var o=r("bpxeT"),i=r("2TvXO"),s=(r("bpxeT"),r("2TvXO"),r("bpxeT"),r("8MBJY")),c=r("a2hTj"),u=r("hKHmD"),l=r("8nrFW"),d=(r("2TvXO"),{pagination:document.getElementById("pagination"),catalogFilms:document.querySelector(".catalog-films"),searchForm:document.querySelector(".search-form"),selectGenres:document.querySelector("#selectGenres"),selectDate:document.querySelector("#selectDate"),btnClear:document.querySelector(".search-clear-btn"),input:document.getElementById("search-form"),btnSearch:document.querySelector(".search-btn"),inputIcon:document.querySelector(".input-icon")}),p=(o=r("bpxeT"),i=r("2TvXO"),function(e){var t=document.querySelector(".no-movie-found");null!==t&&t.remove();var n,a=e.map((function(e){return'<li data-id="'.concat(e.id,'" class="catalog-card is-id">\n  <img\n    src="https://image.tmdb.org/t/p/original').concat(e.poster,'"\n    alt="').concat(e.title,'"\n    loading="lazy"\n  />\n  <div class="catalog-overlay"></div>\n  <div class="catalog-info">\n    <h3 class="catalog-info-name">').concat(e.title,'</h3>\n    <div class="catalog-info-date">\n      <p class="catalog-info-details">').concat(e.genres," | ").concat(e.date,'</p>\n      <div\n        class="Stars stars-five"\n        style="--rating: ').concat(e.rating,'"\n        aria-label="Rating of this product is 2.3 out of 5."\n      ></div>\n    </div>\n  </div>\n</li>')})).join("");if(!a.length){var r=g();return console.log(r),d.catalogFilms.insertAdjacentHTML("beforebegin",r),void(d.catalogFilms.innerHTML="")}n=a,d.catalogFilms.innerHTML=n}),g=function(){return'<div class="no-movie-found">\n    <p class="no-movie-found__text">\n      <span class="no-movie-found__text-item">OOPS...</span>\n      <span class="no-movie-found__text-item">We are very sorry!</span>\n      <span class="no-movie-found__text-item">\n        We donâ€™t have any results matching your search.\n      </span>\n    </p>\n  </div>'};var v,f=(v=e(o)(e(i).mark((function t(n){var a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:a=e.sent,r=n.map((function(e){var t=e.id,n=e.title,r=e.poster_path,o=e.vote_average,i=e.genre_ids,s=e.release_date;return{id:t,title:n,poster:r,rating:o,genres:h(a,i),date:m(s)}})),p(r);case 5:case"end":return e.stop()}}),t)}))),function(e){return v.apply(this,arguments)}),h=function(e,t){var n=[];return e.map((function(e){var a=e.id,r=e.name;-1!==t.indexOf(a)&&n.push(r)})),n.slice(0,2).join(", ")},m=function(e){return new Date(e).getFullYear()},y=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},w=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},P=function(){"use strict";function t(n,a,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],p=this;e(s)(this,t);var g=this;e(u)(this,"createButton",e(o)(e(i).mark((function t(){var n;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(g.params),!(g.totalPages<=1)){e.next=4;break}return g.reset(),e.abrupt("return");case 4:g.arrPaginationItems=[],g.addFirstPages(g.arrPaginationItems),g.totalPages>6&&(g.addEllipsisIfNeeded(g.arrPaginationItems),g.addMiddlePages(g.arrPaginationItems),g.addEllipsisIfNeeded(g.arrPaginationItems,!0),g.addLastPage(g.arrPaginationItems)),n=g.createPagination(g.arrPaginationItems.join("")),g.render(n),y("currentPage",g.currentPage);case 10:case"end":return e.stop()}}),t)})))),e(u)(this,"addFirstPages",(function(e){for(var t=1;t<=Math.min(3,p.totalPages);t++){var n=p.currentPage===t?"btn-active":"",a=p.createPaginationItem("0"+t,n);e.push(a)}})),e(u)(this,"addMiddlePages",(function(e){for(var t=Math.max(4,p.currentPage-2),n=Math.min(p.currentPage+1,p.totalPages-1),a=t;a<=n;a++){var r=p.currentPage===a?"btn-active":"",o=[];o=a<=9?p.createPaginationItem("0"+a,r):p.createPaginationItem(a,r),e.push(o)}})),e(u)(this,"addEllipsisIfNeeded",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t&&p.currentPage<p.totalPages-2||!t&&p.currentPage>3)&&e.push('<li class="pagination-item ellipsis">...</li>')})),e(u)(this,"addLastPage",(function(e){var t=p.totalPages,n=p.currentPage===t?"btn-active":"",a=p.createPaginationItem(t,n);e.push(a)})),e(u)(this,"createPaginationItem",(function(e,t){return"<li class='pagination-item ".concat(t,"'>\n              <a href='#' data-page='").concat(e,"' class='pagination-btn'>").concat(e,"</a>\n            </li>")})),e(u)(this,"createPagination",(function(e){return"\n      <div class='pagination ".concat(p.totalPages<=1?"pagination-hidden":"","'>\n      <button type=\"button\" class='pagination-arrow pagination-arrows-prev").concat(p.totalPages<=1?"pagination-arrows-hidden":"","'>prev</button>\n        <ul class='pagination-list'>").concat(e,'</ul>\n        <button type="button" class=\'pagination-arrow pagination-arrows-next').concat(p.totalPages<=1?"pagination-arrows-hidden":"","'>next</button>\n      </div>")})),e(u)(this,"render",(function(e){p.reset(),d.catalogFilms.insertAdjacentHTML("afterend",e);var t=document.querySelector(".pagination"),n=document.querySelector(".pagination");t.addEventListener("click",p.handlerBtn),n.addEventListener("click",p.arrowHandler);var a=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===p.currentPage?a.style.display="none":a.style.display="block";var r=document.querySelector(".pagination-arrow.pagination-arrows-next");p.currentPage===p.totalPages?r.style.display="none":r.style.display="block"})),e(u)(this,"arrowHandler",(function(e){var t=e.target;t.classList.contains("pagination-arrows-prev")&&p.prev(),t.classList.contains("pagination-arrows-next")&&p.next()})),e(u)(this,"reset",(function(){var e=document.querySelector(".pagination");e&&e.remove()})),e(u)(this,"prev",(function(){if(1!==p.currentPage){p.currentPage-=1,p.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===p.currentPage?e.style.display="none":e.style.display="block"}})),e(u)(this,"next",(function(){if(p.currentPage!==p.totalPages){p.currentPage+=1,p.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-next");p.currentPage===p.totalPages?e.style.display="none":e.style.display="block"}}));var v=this;e(u)(this,"handlerBtn",function(){var t=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=parseInt(n.target.dataset.page),isNaN(a)){t.next=7;break}return v.currentPage=a,v.createButton(),t.next=7,v.getMovies.apply(v,[v.currentPage].concat(e(l)(v.params)));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),console.log(c),this.totalPages=n,this.currentPage=a,this.getMovies=r,this.params=c,this.arrPaginationItems=[]}return e(c)(t,[{key:"updatePage",value:function(e){this.currentPage=e,this.createButton()}}]),t}(),b=r("jyO6b"),x=r("dIxxU"),S=r("3KAdz"),_="88b8a7c5d221d3120fb29d734050dc7d";function L(e){return I.apply(this,arguments)}function I(){return(I=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,S.onLoader)(),e.next=4,x.default.get(n);case 4:return a=e.sent,(0,S.removeLoader)(),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,S.removeLoader)(),e.abrupt("return",null);case 14:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var k=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s,c,u,l=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,r=l.length>2&&void 0!==l[2]?l[2]:"",d.selectGenres.disabled=!0,d.selectDate.disabled=!1,console.log(n,a,r),e.next=6,(0,b.getByQuery)(n,a,r);case 6:return o=e.sent,s=o.results,c=o.total_pages,u=o.page,f(s),e.abrupt("return",{results:s,total_pages:c,page:u});case 12:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s,c,u=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:0,d.selectGenres.disabled=!1,d.selectDate.disabled=!0,e.next=5,L("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(_,"&page=").concat(n).concat(a?"&with_genres=".concat(a):"","&language=en-US"));case 5:return r=e.sent.data,console.log(r),o=r.results,s=r.page,c=r.total_pages,console.log(o),f(o),e.abrupt("return",{results:o,page:s,total_pages:c});case 11:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(_));case 2:return n=e.sent.data,a=n.genres,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=document.querySelector(".search-form"),E=document.querySelector("#selectGenres"),B=document.querySelector("#selectDate"),F=function(){var t=e(o)(e(i).mark((function t(){var n,a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(1);case 2:n=e.sent,a=n.page,r=n.total_pages,new P(r,a,T).createButton();case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w("searchTerm"),console.log("afterSearching",a),e.next=4,k(1,a);case 4:r=e.sent,o=r.page,s=r.total_pages,new P(s,o,k,[a,1]).createButton(),B.removeAttribute("disabled");case 10:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:n=e.sent,(a=n.map((function(e){return'<option value="'.concat(e.id,'">').concat(e.name,"</option>")}))).unshift("<option value='all'>All</option>"),E.innerHTML=a.join(""),E.removeAttribute("disabled");case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,e.next=3,T(1,n.target.value);case 3:r=e.sent,o=r.total_pages,r.results,new P(o,1,T,[a]).createButton();case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,r=w("searchTerm"),e.next=4,k(1,r,a);case 4:o=e.sent,s=o.total_pages,o.page,new P(s,1,k,[r,a]).createButton();case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();M.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()).searchMovies;n.length?(y("searchTerm",n),O(n)):F()})),window.addEventListener("load",F),window.addEventListener("load",D),window.addEventListener("load",(function(){for(var e=[],t=(new Date).getFullYear();t>=1970;t--)e.push('<option value="'.concat(t,'">').concat(t,"</option>"));B.innerHTML=e.join("")})),E.addEventListener("change",j),B.addEventListener("change",H),r("i6wQM"),r("1TFAy"),r("hVzVa"),r("h8OCG"),d.btnClear.addEventListener("click",(function(){console.log("hi"),d.input.value=""})),d.input.addEventListener("input",(function(){""===d.input.value?(console.log("hyyy"),d.inputIcon.classList.add("icon-hidden")):(console.log("heee"),d.inputIcon.classList.remove("icon-hidden"))})),r("3XXFj")}();
//# sourceMappingURL=catalog.a7dc8107.js.map
