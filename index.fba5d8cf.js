var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},t={},a=n.parcelRequire8a95;null==a&&((a=function(n){if(n in e)return e[n].exports;if(n in t){var a=t[n];delete t[n];var i={id:n,exports:{}};return e[n]=i,a.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(n,e){t[n]=e},n.parcelRequire8a95=a),a("g7hbw"),a("70ClL");var i=a("19F3f");const r={listOfFilms:document.querySelector(".weekly-cards-wrap"),upcomingWrapEl:document.querySelector(".upcoming_wrap"),seeAll:document.querySelector(".weekly-title-link")};var s=a("cl7Eh");const{upcomingWrapEl:o,listOfFilms:d}=r;let l=null;async function c(n){const e=await Promise.all(n.map((async({backdrop_path:n,title:e,release_date:t,genre_ids:a,id:i,poster_path:r,name:s,first_air_date:o,vote_average:d})=>{a=w(a);return`<li class="weekly-card is-id" data-id=${i}>\n        <div class="weekly-container-image">\n          <img\n            class="weekly-card-image"\n           src="https://image.tmdb.org/t/p/original/${r}"\n            alt=""\n          />\n         <div class="overlay"></div>       \n        </div>\n  <div class="weekly-card-description">\n    <h3 class="weekly-card-description-title">${e||s}</h3>\n    <div class='weekly-card-description-wrap'>\n       <p class="weekly-card-description-other">${await m(a)} | ${t?t.substring(0,4):o.substring(0,4)}</p>\n\n     <div class="Stars" style="--rating: ${parseFloat((d/2).toFixed(1))};" aria-label="Rating of this product is 2.3 out of 5."></div>\n      </div>\n  </div>\n      </li>`})));d.innerHTML=e.join("")}async function p(n){let{id:e,backdrop_path:t,poster_path:a,genre_ids:i,popularity:r,release_date:d,title:c,vote_average:p,vote_count:u,overview:g}=n;i=w(i);const f=await m(i);const y=`<div class="upcoming-card">\n\n            <img class="upcoming-card-img" src="${v(t,a,window.innerWidth<767)}" alt=" " />\n\n          <div class="upcoming-card-wrap">\n            <h3 class="upcoming-card-title">${c}</h3>\n\n            <div class="upcoming-card-numbers-wrap-top">\n              <div class="upcoming-card-release-wrap">\n                <span class="upcoming-card-release-text">Release date</span>\n                <span class="upcoming-card-release-data">${d}</span>\n              </div>\n\n              <div class="upcoming-card-vote-wrap">\n                <div class="upcoming-card-vote"><span>Vote / Votes</span></div>\n                <div class="upcoming-card-vote-data">\n                  <span>${p}</span> / <span>${u}</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="upcoming-card-numbers-wrap-down">\n              <div class="upcoming-card-popularity-wrap">\n                <span class="upcoming-card-popularity-text">Popularity</span>\n                <span class="upcoming-card-popularity-data">${r.toFixed(1)}</span>\n              </div>\n\n              <div class="upcoming-card-genre-wrap">\n                <span class="upcoming-card-genre-text">Genre</span>\n                <span class="upcoming-card-genre-data">${f}</span>\n              </div>\n            </div>\n \n            <span class="upcoming-card-about-title">About</span>\n\n            <p class="upcoming-card-about-text">${g}</p>\n\n            <button class="upcoming-button" id="add-to-lib" type="button">\n              Add to my library\n            </button>\n          </div>\n        </div>`;o.insertAdjacentHTML("beforeend",y),l=document.getElementById("add-to-lib");var h;h=e,(JSON.parse(localStorage.getItem("films"))||[]).some((n=>n.id===h))&&(l.textContent="Remove from the library");l.addEventListener("click",(e=>{(0,s.handleFilmInStorage)(n),window.location.href.includes("my-lib-page.html")&&window.location.reload()}))}const{seeAll:u,upcomingWrapEl:g}=r;async function m(n){const e=(await(0,i.getGenre)()).genres;return n.map((n=>{const t=e.find((e=>e.id===n));return t?t.name:""})).join(", ")}function v(n,e,t){return!0===t&&null!==e?`https://image.tmdb.org/t/p/original/${e}`:!1===t&&null!==n?`https://image.tmdb.org/t/p/original/${n}`:!1===t&&null===n&&null!==e?`https://image.tmdb.org/t/p/original/${e}`:!0===t&&null===e&&null!==n?`https://image.tmdb.org/t/p/original/${n}`:"https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787"}function w(n){return n.length>2?n.slice(0,2):n}u.addEventListener("click",(()=>{location.href="catalog.html"})),window.addEventListener("DOMContentLoaded",(async function(){const{formattedStartDate:n,formattedEndDate:e}=function(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),i=`${e}-${t}-${a}`,r=new Date(e,t,1),s=new Date(r-1).getDate(),o=String(s).padStart(2,"0");return{formattedStartDate:i,formattedEndDate:`${e}-${t}-${o}`}}();try{const t=await(0,i.getUpcoming)(n,e);p(function(n){const e=Math.floor(Math.random()*n.length);return n[e]}(t.results))}catch(n){g.insertAdjacentHTML("beforeend",'<p class="upcoming-not-found">OOPS...<br>We are very sorry!<br>We donâ€™t have any results</p>')}})),window.addEventListener("DOMContentLoaded",(async function(){c((await(0,i.getWeeklyTrending)()).results.slice(0,3))})),a("7Yg6P"),a("2tESM"),a("hwTRf");
//# sourceMappingURL=index.fba5d8cf.js.map
