!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire8a95;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire8a95=r),r("i6wQM");var o=r("bpxeT"),i=r("2TvXO"),s={pagination:document.getElementById("pagination"),catalogSection:document.querySelector(".catalog"),catalogFilms:document.querySelector(".catalog-films"),searchForm:document.querySelector(".search-form"),selectGenres:document.querySelector("#selectGenres"),selectDate:document.querySelector("#selectDate"),btnClear:document.querySelector(".search-clear-btn"),input:document.getElementById("search-form"),btnSearch:document.querySelector(".search-btn"),inputIcon:document.querySelector(".input-icon")},c=(r("bpxeT"),r("2TvXO"),r("bpxeT"),r("8MBJY")),u=r("a2hTj"),l=r("hKHmD"),p=r("8nrFW"),d=(r("2TvXO"),o=r("bpxeT"),i=r("2TvXO"),function(e){var t=document.querySelector(".no-movie-found");null!==t&&t.remove();var n,a=e.map((function(e){return'<li data-id="'.concat(e.id,'" class="catalog-card is-id">\n  <img\n    src="https://image.tmdb.org/t/p/original').concat(e.poster,'"\n    alt="').concat(e.title,'"\n    loading="lazy"\n  />\n  <div class="catalog-overlay"></div>\n  <div class="catalog-info">\n    <h3 class="catalog-info-name">').concat(e.title,'</h3>\n    <div class="catalog-info-date">\n      <p class="catalog-info-details">').concat(e.genres," | ").concat(e.date,'</p>\n      <div\n        class="Stars stars-five"\n        style="--rating: ').concat(e.rating,'"\n        aria-label="Rating of this product is 2.3 out of 5."\n      ></div>\n    </div>\n  </div>\n</li>')})).join("");if(!a.length){var r=g();return s.catalogFilms.insertAdjacentHTML("beforebegin",r),void(s.catalogFilms.innerHTML="")}n=a,s.catalogFilms.innerHTML=n}),g=function(){return'<div class="no-movie-found">\n    <p class="no-movie-found__text">\n      <span class="no-movie-found__text-item">OOPS...</span>\n      <span class="no-movie-found__text-item">We are very sorry!</span>\n      <span class="no-movie-found__text-item">\n        We donâ€™t have any results matching your search.\n      </span>\n    </p>\n  </div>'};var v,f=(v=e(o)(e(i).mark((function t(n){var a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:a=e.sent,r=n.map((function(e){var t=e.id,n=e.title,r=e.poster_path,o=e.vote_average,i=e.genre_ids,s=e.release_date;return{id:t,title:n,poster:r,rating:o,genres:h(a,i),date:m(s)}})),d(r);case 5:case"end":return e.stop()}}),t)}))),function(e){return v.apply(this,arguments)}),h=function(e,t){var n=[];return e.map((function(e){var a=e.id,r=e.name;-1!==t.indexOf(a)&&n.push(r)})),n.slice(0,2).join(", ")},m=function(e){return new Date(e).getFullYear()},y=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},w=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},P=function(){"use strict";function t(n,a){var r=n.totalPages,u=n.page,d=n.parentSection,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],v=this;e(c)(this,t);var f=this;e(l)(this,"createButton",e(o)(e(i).mark((function t(){var n;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.totalPages<=1)){e.next=3;break}return f.reset(),e.abrupt("return");case 3:f.arrPaginationItems=[],f.addFirstPages(f.arrPaginationItems),f.totalPages>6&&(f.addEllipsisIfNeeded(f.arrPaginationItems),f.addMiddlePages(f.arrPaginationItems),f.addEllipsisIfNeeded(f.arrPaginationItems,!0),f.addLastPage(f.arrPaginationItems)),n=f.createPagination(f.arrPaginationItems.join("")),f.render(n),y("currentPage",f.currentPage);case 9:case"end":return e.stop()}}),t)})))),e(l)(this,"addFirstPages",(function(e){for(var t=1;t<=Math.min(3,v.totalPages);t++){var n=v.currentPage===t?"btn-active":"",a=v.createPaginationItem("0"+t,n);e.push(a)}})),e(l)(this,"addMiddlePages",(function(e){for(var t=Math.max(4,v.currentPage-2),n=Math.min(v.currentPage+1,v.totalPages-1),a=t;a<=n;a++){var r=v.currentPage===a?"btn-active":"",o=[];o=a<=9?v.createPaginationItem("0"+a,r):v.createPaginationItem(a,r),e.push(o)}})),e(l)(this,"addEllipsisIfNeeded",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t&&v.currentPage<v.totalPages-2||!t&&v.currentPage>3)&&e.push('<li class="pagination-item ellipsis">...</li>')})),e(l)(this,"addLastPage",(function(e){var t=v.totalPages,n=v.currentPage===t?"btn-active":"",a=v.createPaginationItem(t,n);e.push(a)})),e(l)(this,"createPaginationItem",(function(e,t){return"<li class='pagination-item ".concat(t,"'>\n              <a href='#' data-page='").concat(e,"' class='pagination-btn'>").concat(e,"</a>\n            </li>")})),e(l)(this,"createPagination",(function(e){return"\n      <div class='pagination ".concat(v.totalPages<=1?"pagination-hidden":"","'>\n      <button type=\"button\" class='pagination-arrow pagination-arrows-prev").concat(v.totalPages<=1?"pagination-arrows-hidden":"","'>prev</button>\n        <ul class='pagination-list'>").concat(e,'</ul>\n        <button type="button" class=\'pagination-arrow pagination-arrows-next').concat(v.totalPages<=1?"pagination-arrows-hidden":"","'>next</button>\n      </div>")})),e(l)(this,"render",(function(e){v.reset(),s.catalogFilms.insertAdjacentHTML("afterend",e);var t=document.querySelector(".pagination"),n=document.querySelector(".pagination");t.addEventListener("click",v.handlerBtn),n.addEventListener("click",v.arrowHandler);var a=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===v.currentPage?a.style.display="none":a.style.display="block";var r=document.querySelector(".pagination-arrow.pagination-arrows-next");v.currentPage===v.totalPages?r.style.display="none":r.style.display="block"})),e(l)(this,"arrowHandler",(function(e){var t=e.target;t.classList.contains("pagination-arrows-prev")&&v.prev(),t.classList.contains("pagination-arrows-next")&&v.next()})),e(l)(this,"reset",(function(){var e=document.querySelector(".pagination");e&&e.remove()})),e(l)(this,"scrollToTop",(function(){void 0!==v.parentSection&&v.parentSection.scrollIntoView({behavior:"instant"})}));var h=this;e(l)(this,"prev",e(o)(e(i).mark((function t(){var n;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==h.currentPage){t.next=2;break}return t.abrupt("return");case 2:return h.currentPage-=1,h.createButton(),t.next=6,h.getMovies.apply(h,[h.currentPage].concat(e(p)(h.params)));case 6:h.scrollToTop(),n=document.querySelector(".pagination-arrow.pagination-arrows-prev"),1===h.currentPage?n.style.display="none":n.style.display="block";case 9:case"end":return t.stop()}}),t)}))));var m=this;e(l)(this,"next",e(o)(e(i).mark((function t(){var n;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m.currentPage!==m.totalPages){t.next=2;break}return t.abrupt("return");case 2:return m.currentPage+=1,m.createButton(),t.next=6,m.getMovies.apply(m,[m.currentPage].concat(e(p)(m.params)));case 6:m.scrollToTop(),n=document.querySelector(".pagination-arrow.pagination-arrows-next"),m.currentPage===m.totalPages?n.style.display="none":n.style.display="block";case 9:case"end":return t.stop()}}),t)}))));var w=this;e(l)(this,"handlerBtn",function(){var t=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=parseInt(n.target.dataset.page),isNaN(a)){t.next=8;break}return w.currentPage=a,w.createButton(),t.next=7,w.getMovies.apply(w,[w.currentPage].concat(e(p)(w.params)));case 7:w.scrollToTop();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.totalPages=r,this.currentPage=u,this.parentSection=d,this.getMovies=a,this.params=g,this.arrPaginationItems=[]}return e(u)(t,[{key:"updatePage",value:function(e){this.currentPage=e,this.createButton()}}]),t}(),b=r("jyO6b"),x=r("dIxxU"),S=r("3KAdz"),T="88b8a7c5d221d3120fb29d734050dc7d";function k(e){return _.apply(this,arguments)}function _(){return(_=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,S.onLoader)(),e.next=4,x.default.get(n);case 4:return a=e.sent,(0,S.removeLoader)(),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),(0,S.removeLoader)(),e.abrupt("return",null);case 13:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var L=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,c,u,l,p=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:1,r=p.length>2&&void 0!==p[2]?p[2]:"",s.selectGenres.disabled=!0,s.selectDate.disabled=!1,e.next=5,(0,b.getByQuery)(n,a,r);case 5:return o=e.sent,c=o.results,u=o.total_pages,l=o.page,f(c),e.abrupt("return",{results:c,total_pages:u,page:l});case 11:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,c,u,l=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,s.selectGenres.disabled=!1,s.selectDate.disabled=!0,e.next=5,k("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(T,"&page=").concat(n).concat(a?"&with_genres=".concat(a):"","&language=en-US"));case 5:return r=e.sent.data,o=r.results,c=r.page,u=r.total_pages,f(o),e.abrupt("return",{results:o,page:c,total_pages:u});case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(T));case 2:return n=e.sent.data,a=n.genres,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=document.querySelector(".search-form"),E=document.querySelector("#selectGenres"),B=document.querySelector("#selectDate"),F=function(){var t=e(o)(e(i).mark((function t(){var n,a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(1);case 2:n=e.sent,a=n.page,r=n.total_pages,new P({totalPages:r,page:a,parentSection:s.catalogSection},I).createButton();case 8:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,c;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w("searchTerm"),e.next=3,L(1,a);case 3:r=e.sent,o=r.page,c=r.total_pages,new P({totalPages:c,page:o,parentSection:s.catalogSection},L,[a,1]).createButton(),B.removeAttribute("disabled");case 10:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:n=e.sent,(a=n.map((function(e){return'<option value="'.concat(e.id,'">').concat(e.name,"</option>")}))).unshift("<option value='all'>All</option>"),E.innerHTML=a.join(""),E.removeAttribute("disabled");case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,e.next=3,I(1,n.target.value);case 3:r=e.sent,o=r.total_pages,r.results,new P({totalPages:o,page:1},I,[a]).createButton();case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,r=w("searchTerm"),e.next=4,L(1,r,a);case 4:o=e.sent,s=o.total_pages,o.page,new P({totalPages:s,page:1},L,[r,a]).createButton();case 10:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();M.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()).searchMovies;n.length?(y("searchTerm",n),O(n)):F()})),window.addEventListener("load",F),window.addEventListener("load",D),window.addEventListener("load",(function(){for(var e=[],t=(new Date).getFullYear();t>=1970;t--)e.push('<option value="'.concat(t,'">').concat(t,"</option>"));B.innerHTML=e.join("")})),E.addEventListener("change",j),B.addEventListener("change",H),M.querySelector("input").addEventListener("input",(function(e){var t=e.target.value;E.disabled=!0,t.length||(E.disabled=!1)})),r("i6wQM"),r("1TFAy"),r("hVzVa"),r("h8OCG"),s.btnClear.addEventListener("click",(function(){s.input.value=""})),s.input.addEventListener("input",(function(){""===s.input.value?s.inputIcon.classList.add("icon-hidden"):s.inputIcon.classList.remove("icon-hidden")})),r("3XXFj")}();
//# sourceMappingURL=catalog.a8a01123.js.map
