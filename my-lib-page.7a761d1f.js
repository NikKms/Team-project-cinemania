!function(){function n(n){return n&&n.__esModule?n.default:n}function t(n,t,e,a){Object.defineProperty(n,t,{get:e,set:a,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},o=e.parcelRequire8a95;null==o&&((o=function(n){if(n in a)return a[n].exports;if(n in r){var t=r[n];delete r[n];var e={id:n,exports:{}};return a[n]=e,t.call(e.exports,e,e.exports),e.exports}var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(n,t){r[n]=t},e.parcelRequire8a95=o),o.register("kaqNk",(function(e,a){t(e.exports,"clearLibrary",(function(){return s})),t(e.exports,"addFilmToStorage",(function(){return d})),t(e.exports,"parsedFilms",(function(){return l})),t(e.exports,"parsedFilmsGenreIds",(function(){return u}));var r=o("8nrFW"),c=o("6JpON");o("5KpiF");var i=JSON.parse(localStorage.getItem("films"))||[],s=function(){localStorage.removeItem("films")},d=function(n){var t=n.id;if(!i.some((function(n){return n.id===t})))return i.unshift(n),localStorage.setItem("films",JSON.stringify(i)),void c.Notify.success("Film was added to library successfully");alert("!!!")},l=function(){try{var n=localStorage.getItem("films");return JSON.parse(n)||[]}catch(n){console.error(n)}}(),u=n(r)(new Set(l.flatMap((function(n){return n.genres.map((function(n){return n.id}))}))))})),o.register("5KpiF",(function(n,e){t(n.exports,"libRefs",(function(){return a}));var a={libSelectEl:document.getElementById("js-genre-select"),libMoviesListEl:document.getElementById("js-lib-list"),libLoadMoreBtn:document.getElementById("js-loadMore-btn"),libClearBtn:document.getElementById("clear-lib-btn")}})),o.register("1TFAy",(function(t,e){var a=o("bpxeT"),r=o("2TvXO"),c=o("i6wQM"),i=o("jyO6b"),s=(i=o("jyO6b"),o("kaqNk"));o("6mrnL");var d=o("kzj0G"),l={openModal:document.querySelector("[data-modal-open]"),closeModal:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),upcomingWrapLi:document.querySelector(".modal-info"),addToLibBtn:null};function u(){window.removeEventListener("keydown",p),c.swiper.autoplay.start(),document.body.classList.remove("not-scroll-body"),l.backdrop.classList.add("is-hidden")}function p(n){"Escape"===n.code&&u()}function m(){return(m=n(a)(n(r).mark((function t(e){return n(r).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.getInfoByMovie)(e);case 2:g(n.sent);case 4:case"end":return n.stop()}}),t)})))).apply(this,arguments)}function g(n){return f.apply(this,arguments)}function f(){return(f=n(a)(n(r).mark((function t(e){var a,o,c,i,u,p,m,g,f,v,y,b,h,w;return n(r).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),a=e.poster_path,o=e.backdrop_path,c=e.genres,i=e.overview,u=e.popularity,p=e.title,m=e.vote_average,g=e.vote_count,f=e.id,v=c.map((function(n){return n.id})),n.next=5,(0,d.getGenresById)(v);case 5:y=n.sent,b="",b=null!==a?"https://image.tmdb.org/t/p/original/".concat(a):null!==o?"https://image.tmdb.org/t/p/original/".concat(o):"https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787",h='\n    <div class="modal-card">\n      <img\n        class="modal-img"\n        src="'.concat(b,'"\n        alt=" "\n      />\n\n      <div class="modal-card-wrap">\n        <h3 class="modal-card-title">').concat(p,'</h3>\n\n          <div class="modal-card-vote-wrap">\n            <div class="modal-card-vote color-description"><span>Vote / Votes</span></div>\n            <div class="modal-card-vote-data">\n              <span>').concat(m.toFixed(1),"</span> / <span>").concat(g,'</span>\n            </div>\n          </div>\n        \n          <div class="modal-card-popularity-wrap">\n            <span class="modal-card-popularity-text color-description">Popularity</span>\n            <span class="modal-card-popularity-data"\n              >').concat(u.toFixed(1),'</span\n            >\n          </div>\n\n          <div class="modal-card-genre-wrap">\n            <span class="modal-card-genre-text color-description">Genre</span>\n            <span class="modal-card-genre-data">').concat(y,'</span>\n          </div>\n        \n        <span class="modal-card-about-title color-description">About</span>\n\n        <p class="modal-card-about-text">').concat(i,'</p>\n\n        <button class="modal-button gap-right" type="button"><span>Add to my library</span></button>\n         <button type="button" class=" modal-button hero-btn-trailer" id="hero-btn-trailer" data-id="').concat(f,'">\n    Watch trailer\n  </button>\n      </div>\n    </div>'),l.upcomingWrapLi.innerHTML=h,l.addToLibBtn=document.querySelector(".modal-button"),w=function(n){(0,s.addFilmToStorage)(e),n.currentTarget.textContent="!!"},l.addToLibBtn.addEventListener("click",w);case 13:case"end":return n.stop()}}),t)})))).apply(this,arguments)}document.addEventListener("click",(function(n){var t=n.target.closest(".is-id");if(null===t)return;(function(n){m.apply(this,arguments)})(t.dataset.id),c.swiper.autoplay.stop(),document.body.classList.add("not-scroll-body"),window.addEventListener("keydown",p),l.backdrop.classList.remove("is-hidden")})),l.closeModal.addEventListener("click",u),l.backdrop.addEventListener("click",(function(n){n.currentTarget===n.target&&u()}))})),o.register("kzj0G",(function(e,a){t(e.exports,"getGenresById",(function(){return g}));var r=o("bpxeT"),c=o("2TvXO");o("1TFAy");var i=o("jyO6b"),s=(o("jyO6b"),i=o("jyO6b"),document.querySelector(".weekly-cards-wrap")),d=document.querySelector(".upcoming_wrap");function l(){return(l=n(r)(n(c).mark((function t(){var e;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.getWeeklyTrending)();case 2:e=n.sent,p(u(e.results));case 5:case"end":return n.stop()}}),t)})))).apply(this,arguments)}function u(n){return n.slice(0,3)}function p(n){return m.apply(this,arguments)}function m(){return m=n(r)(n(c).mark((function t(e){var a;return n(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,Promise.all(e.map(function(){var t=n(r)(n(c).mark((function t(e){var a,r,o,i,s,d,l,u,p;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.backdrop_path,a=e.title,r=e.release_date,o=e.genre_ids,i=e.id,s=e.poster_path,d=e.name,l=e.first_air_date,u=e.vote_average,o=w(o),n.next=4,g(o);case 4:return p=n.sent,n.abrupt("return",'<li class="weekly-card is-id" data-id='.concat(i,'>\n        <div class="weekly-container-image">\n          <img\n            class="weekly-card-image"\n           src="https://image.tmdb.org/t/p/original/').concat(s,'"\n            alt=""\n          />\n         <div class="overlay"></div>       \n        </div>\n  <div class="weekly-card-description">\n    <h3 class="weekly-card-description-title">').concat(a||d,"</h3>\n    <div class='weekly-card-description-wrap'>\n       <p class=\"weekly-card-description-other\">").concat(p," | ").concat(r?r.substring(0,4):l.substring(0,4),'</p>\n\n     <div class="Stars" style="--rating: ').concat(parseFloat((u/2).toFixed(1)),';" aria-label="Rating of this product is 2.3 out of 5."></div>\n      </div>\n  </div>\n      </li>'));case 6:case"end":return n.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 3:a=t.sent,s.innerHTML=a.join("");case 5:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function g(n){return f.apply(this,arguments)}function f(){return(f=n(r)(n(c).mark((function t(e){var a,r,o;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.getGenre)();case 2:return a=n.sent,r=a.genres,o=e.map((function(n){var t=r.find((function(t){return t.id===n}));return t?t.name:""})),n.abrupt("return",o.join(", "));case 6:case"end":return n.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=n(r)(n(c).mark((function t(){var e,a,r,o;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=x(),a=e.formattedStartDate,r=e.formattedEndDate,n.prev=1,n.next=4,(0,i.getUpcoming)(a,r);case 4:o=n.sent,y(k(o.results)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),d.insertAdjacentHTML("beforeend",'<p class="upcoming-not-found">OOPS...We are very sorry! We donâ€™t have any results</p>');case 12:case"end":return n.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function y(n){return b.apply(this,arguments)}function b(){return(b=n(r)(n(c).mark((function t(e){var a,r,o,i,s,l,u,p,m,f,v,y,b;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.backdrop_path,r=e.poster_path,o=e.genre_ids,i=e.popularity,s=e.release_date,l=e.title,u=e.vote_average,p=e.vote_count,m=e.overview,o=w(o),n.next=4,g(o);case 4:f=n.sent,v=window.innerWidth<767,y=h(a,r,v),b='<div class="upcoming-card">\n\n            <img class="upcoming-card-img" src="'.concat(y,'" alt=" " />\n\n          <div class="upcoming-card-wrap">\n            <h3 class="upcoming-card-title">').concat(l,'</h3>\n\n            <div class="upcoming-card-numbers-wrap-top">\n              <div class="upcoming-card-release-wrap">\n                <span class="upcoming-card-release-text">Release date</span>\n                <span class="upcoming-card-release-data">').concat(s,'</span>\n              </div>\n\n              <div class="upcoming-card-vote-wrap">\n                <div class="upcoming-card-vote"><span>Vote / Votes</span></div>\n                <div class="upcoming-card-vote-data">\n                  <span>').concat(u,"</span> / <span>").concat(p,'</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="upcoming-card-numbers-wrap-down">\n              <div class="upcoming-card-popularity-wrap">\n                <span class="upcoming-card-popularity-text">Popularity</span>\n                <span class="upcoming-card-popularity-data">').concat(i.toFixed(1),'</span>\n              </div>\n\n              <div class="upcoming-card-genre-wrap">\n                <span class="upcoming-card-genre-text">Genre</span>\n                <span class="upcoming-card-genre-data">').concat(f,'</span>\n              </div>\n            </div>\n \n            <span class="upcoming-card-about-title">About</span>\n\n            <p class="upcoming-card-about-text">').concat(m,'</p>\n\n            <button class="upcoming-button" type="button">\n              Add to my library\n            </button>\n          </div>\n        </div>'),d.insertAdjacentHTML("beforeend",b);case 9:case"end":return n.stop()}}),t)})))).apply(this,arguments)}function h(n,t,e){return!0===e&&null!==t?"https://image.tmdb.org/t/p/original/".concat(t):!1===e&&null!==n?"https://image.tmdb.org/t/p/original/".concat(n):!1===e&&null===n&&null!==t?"https://image.tmdb.org/t/p/original/".concat(t):!0===e&&null===t&&null!==n?"https://image.tmdb.org/t/p/original/".concat(n):"https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787"}function w(n){return n.length>2?n.slice(0,2):n}function x(){var n=new Date,t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),r="".concat(t,"-").concat(e,"-").concat(a),o=new Date(t,e,1),c=new Date(o-1).getDate(),i=String(c).padStart(2,"0");return{formattedStartDate:r,formattedEndDate:"".concat(t,"-").concat(e,"-").concat(i)}}function k(n){return n[Math.floor(Math.random()*n.length)]}document.querySelector(".weekly-title-link").addEventListener("click",(function(){location.href="catalog.html"})),window.addEventListener("DOMContentLoaded",(function(){return v.apply(this,arguments)})),window.addEventListener("DOMContentLoaded",(function(){return l.apply(this,arguments)}))}))}();
//# sourceMappingURL=my-lib-page.7a761d1f.js.map
