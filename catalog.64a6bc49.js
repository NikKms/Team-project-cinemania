!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire8a95;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire8a95=r),r("i6wQM");var o=r("bpxeT"),i=r("2TvXO"),s=(r("bpxeT"),r("2TvXO"),r("8MBJY")),c=r("a2hTj"),u=r("hKHmD"),l={pagination:document.getElementById("pagination"),catalogFilms:document.querySelector(".catalog-films"),searchForm:document.querySelector(".search-form"),selectGenres:document.querySelector("#selectGenres"),selectDate:document.querySelector("#selectDate")},d=(o=r("bpxeT"),i=r("2TvXO"),function(e){var t,n=e.map((function(e){return"<li data-id=".concat(e.id,' class="catalog-card">\n      <img src=\'https://image.tmdb.org/t/p/original').concat(e.poster,"' alt=\"").concat(e.title,'" loading="lazy" />\n      <div class="catalog-info">\n      <p class="catalog-info-name">').concat(e.title,'</p>\n        <div class="catalog-info-container">\n          <p class="catalog-info-details">\n            <span>').concat(e.genres,"</span>\n            <span>").concat(e.date,'</span>\n          </p>\n          <div\n          class="Stars"\n          style="--rating: ').concat(e.rating/2,'"\n          aria-label="Rating of this product is 2.3 out of 5."\n        ></div>\n        </div>\n      </div>\n      <div class="overlay"></div>\n    </li>')})).join("");t=n,l.catalogFilms.innerHTML=t});var p,g=(p=e(o)(e(i).mark((function t(n){var a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:a=e.sent,r=n.map((function(e){var t=e.id,n=e.title,r=e.poster_path,o=e.vote_average,i=e.genre_ids,s=e.release_date;return{id:t,title:n,poster:r,rating:o,genres:f(a,i),date:v(s)}})),d(r);case 5:case"end":return e.stop()}}),t)}))),function(e){return p.apply(this,arguments)}),f=function(e,t){var n=[];return e.map((function(e){var a=e.id,r=e.name;-1!==t.indexOf(a)&&n.push(r)})),n.slice(0,2).join(", ")},v=function(e){return new Date(e).getFullYear()},h=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},m=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},y=function(){"use strict";function t(n,a,r){var o=this;e(s)(this,t),e(u)(this,"createButton",(function(){if(o.totalPages<=1)o.reset();else{o.arrPaginationItems=[],o.addFirstPages(o.arrPaginationItems),o.totalPages>6&&(o.addEllipsisIfNeeded(o.arrPaginationItems),o.addMiddlePages(o.arrPaginationItems),o.addEllipsisIfNeeded(o.arrPaginationItems,!0),o.addLastPage(o.arrPaginationItems));var e=o.createPagination(o.arrPaginationItems.join(""));o.render(e),h("currentPage",o.currentPage),o.getMovies(o.currentPage),console.log(o.totalPages)}})),e(u)(this,"addFirstPages",(function(e){for(var t=1;t<=Math.min(3,o.totalPages);t++){var n=o.currentPage===t?"btn-active":"",a=o.createPaginationItem(t,n);e.push(a)}})),e(u)(this,"addMiddlePages",(function(e){for(var t=Math.max(4,o.currentPage-2),n=Math.min(o.currentPage+1,o.totalPages-1),a=t;a<=n;a++){var r=o.currentPage===a?"btn-active":"",i=o.createPaginationItem(a,r);e.push(i)}})),e(u)(this,"addEllipsisIfNeeded",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t&&o.currentPage<o.totalPages-2||!t&&o.currentPage>3)&&e.push('<li class="pagination-item ellipsis">...</li>')})),e(u)(this,"addLastPage",(function(e){var t=o.totalPages,n=o.currentPage===t?"btn-active":"",a=o.createPaginationItem(t,n);e.push(a)})),e(u)(this,"createPaginationItem",(function(e,t){return"<li class='pagination-item ".concat(t,"'>\n              <a href='#' data-page='").concat(e,"' class='pagination-btn'>").concat(e,"</a>\n            </li>")})),e(u)(this,"createPagination",(function(e){return"\n      <div class='pagination ".concat(o.totalPages<=1?"pagination-hidden":"","'>\n      <button type=\"button\" class='pagination-arrow pagination-arrows-prev").concat(o.totalPages<=1?"pagination-arrows-hidden":"","'>prev</button>\n        <ul class='pagination-list'>").concat(e,'</ul>\n        <button type="button" class=\'pagination-arrow pagination-arrows-next').concat(o.totalPages<=1?"pagination-arrows-hidden":"","'>next</button>\n      </div>")})),e(u)(this,"render",(function(e){o.reset(),l.catalogFilms.insertAdjacentHTML("afterend",e);var t=document.querySelector(".pagination"),n=document.querySelector(".pagination");t.addEventListener("click",o.handlerBtn),n.addEventListener("click",o.arrowHandler);var a=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===o.currentPage?a.style.display="none":a.style.display="block";var r=document.querySelector(".pagination-arrow.pagination-arrows-next");o.currentPage===o.totalPages?r.style.display="none":r.style.display="block"})),e(u)(this,"arrowHandler",(function(e){var t=e.target;t.classList.contains("pagination-arrows-prev")&&o.prev(),t.classList.contains("pagination-arrows-next")&&o.next()})),e(u)(this,"reset",(function(){var e=document.querySelector(".pagination");e&&e.remove()})),e(u)(this,"prev",(function(){if(1!==o.currentPage){o.currentPage-=1,o.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===o.currentPage?e.style.display="none":e.style.display="block"}})),e(u)(this,"next",(function(){if(o.currentPage!==o.totalPages){o.currentPage+=1,o.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-next");o.currentPage===o.totalPages?e.style.display="none":e.style.display="block"}})),e(u)(this,"handlerBtn",(function(e){e.preventDefault();var t=parseInt(e.target.dataset.page);isNaN(t)||(o.currentPage=t,o.createButton())})),this.totalPages=n,this.currentPage=a,this.getMovies=r,this.arrPaginationItems=[]}return e(c)(t,[{key:"updatePage",value:function(e){this.currentPage=e,this.createButton()}}]),t}(),P=r("jyO6b"),w=r("dIxxU"),b="88b8a7c5d221d3120fb29d734050dc7d",x=function(){var t=e(o)(e(i).mark((function t(){var n,a,r,o,s,c,u,d=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>0&&void 0!==d[0]?d[0]:1,a=d.length>1&&void 0!==d[1]?d[1]:0,l.selectGenres.disabled=!0,l.selectDate.disabled=!1,r=m("searchTerm"),console.log(n,r,a),e.next=7,(0,P.getByQuery)(r,n,a);case 7:return o=e.sent,s=o.results,c=o.total_pages,u=o.page,g(s),e.abrupt("return",{results:s,total_pages:c,page:u});case 13:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s,c,u=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:0,console.log(a),l.selectGenres.disabled=!1,l.selectDate.disabled=!0,e.next=6,w.default.get("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(b,"&page=").concat(n).concat(a?"&with_genres=".concat(a):"","&language=en-US"));case 6:return r=e.sent.data,o=r.results,s=r.page,c=r.total_pages,g(o),e.abrupt("return",{results:o,page:s,total_pages:c});case 10:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(b));case 2:return n=e.sent.data,a=n.genres,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=document.querySelector(".search-form"),_=document.querySelector("#selectGenres"),T=document.querySelector("#selectDate"),L=function(){var t=e(o)(e(i).mark((function t(){var n,a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:n=e.sent,a=n.page,r=n.total_pages,new y(r,a,S).createButton(),localStorage.removeItem("searchTerm");case 8:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:a=e.sent,r=a.page,o=a.total_pages,new y(o,r,x).createButton(),T.removeAttribute("disabled");case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:n=e.sent,(a=n.map((function(e){return'<option value="'.concat(e.id,'">').concat(e.name,"</option>")}))).unshift("<option value='all'>All</option>"),_.innerHTML=a.join(""),_.removeAttribute("disabled");case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.value,r=m("currentPage"),!m("searchTerm")){e.next=13;break}if("all"!==a){e.next=7;break}return x(r,0),e.abrupt("return");case 7:return e.next=9,x(r,a);case 9:return o=e.sent.results,g(o),console.log(o),e.abrupt("return");case 13:return e.next=15,S(r,a);case 15:s=e.sent.results,console.log(s),g(s);case 18:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,r=m("currentPage"),e.next=4,x(r,a);case 4:o=e.sent,s=o.total_pages,o.page,new y(s,1,x).createButton();case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();k.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()).searchMovies;n.length?(h("searchTerm",n),q(n)):L()})),window.addEventListener("load",L),window.addEventListener("load",M),window.addEventListener("load",(function(){for(var e=[],t=(new Date).getFullYear();t>=1970;t--)e.push('<option value="'.concat(t,'">').concat(t,"</option>"));T.innerHTML=e.join("")})),_.addEventListener("change",E),T.addEventListener("change",B),r("hVzVa"),r("h8OCG")}();
//# sourceMappingURL=catalog.64a6bc49.js.map
