{"mappings":"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","sources":["src/partials/js/my-lib/lib-main.js","src/partials/js/my-lib/lib-refs.js","src/partials/js/my-lib/lib-markups.js","src/partials/js/my-lib/loadMoreBtn.js"],"sourcesContent":["import * as hero from '../../js/modal';\nimport { swiper } from '../hero/hero';\nimport { getGenre } from '../api';\nimport { parsedFilms, parsedFilmsGenreIds } from './lib-storage';\nimport {\n  renderLibMoviesListMarkup,\n  renderLibSelectMarkup,\n} from './lib-markups';\nimport { libRefs } from './lib-refs';\nimport { LoadMoreBtn } from './loadMoreBtn';\nimport { Notify } from 'notiflix';\n\nconst {\n  libSelectEl,\n  libMoviesListEl,\n  libLoadMoreBtn,\n  libClearBtn,\n  libContainerEL,\n} = libRefs;\n\nconst loadMore = new LoadMoreBtn({\n  btnEl: libLoadMoreBtn,\n});\n\nlet selectedGenre = '1';\nconst movieByStep = 9;\nlet totalMoviesLoaded = 0;\n\nconst getFilteredGenres = async movieGenresIds => {\n  const { genres } = await getGenre();\n\n  return genres.filter(({ id }) => movieGenresIds.includes(id));\n};\n\nconst getGenreName = async movieGenreIds => {\n  const filteredGenres = await getFilteredGenres(movieGenreIds);\n  const genreNames = filteredGenres.map(({ name }) => name);\n  return genreNames.slice(0, 2).join(', ');\n};\n\nconst renderFilteredGenres = async moviesArr => {\n  const filteredGenres = await getFilteredGenres(moviesArr);\n  renderLibSelectMarkup(filteredGenres);\n};\n\nconst onLibSelectChange = () => {\n  selectedGenre = libSelectEl.value;\n  totalMoviesLoaded = 0;\n  clearHTML();\n  loadMoviesByGenre(selectedGenre);\n};\n\nconst loadMovies = moviesArr => {\n  const slicedArr = moviesArr.slice(\n    totalMoviesLoaded,\n    totalMoviesLoaded + movieByStep\n  );\n\n  totalMoviesLoaded += movieByStep;\n  renderLibMoviesListMarkup(slicedArr);\n};\n\nconst loadMoviesByGenre = selectedValue => {\n  filterMoviesListByGenre(selectedValue);\n};\n\nconst filterMoviesListByGenre = selectedValue => {\n  if (selectedValue === '1') {\n    loadMovies(parsedFilms);\n    checkArrLength(parsedFilms);\n  } else {\n    const filteredMovies = parsedFilms.filter(movie =>\n      movie.genresIds.includes(parseInt(selectedValue))\n    );\n    loadMovies(filteredMovies);\n    checkArrLength(filteredMovies);\n  }\n};\n\nconst handleDeleteFilm = event => {\n  const filmId = event.currentTarget.closest('.weekly-card').dataset.id;\n  console.log('filmId: ', filmId);\n  removeItemFromLocalStorage(parseInt(filmId));\n  window.location.reload();\n};\n\nconst removeItemFromLocalStorage = id => {\n  const items = JSON.parse(localStorage.getItem('films')) || [];\n\n  const index = items.findIndex(item => item.id === id);\n  console.log('index: ', index);\n\n  if (index !== -1) {\n    items.splice(index, 1);\n    localStorage.setItem('films', JSON.stringify(items));\n  }\n};\n\nconst checkArrLength = moviesArr => {\n  if (moviesArr.length <= totalMoviesLoaded) {\n    loadMore.hideBtn();\n  } else {\n    loadMore.showBtn();\n  }\n};\n\nconst onLoadBtnClick = () => {\n  loadMore.disableBtn();\n  loadMoviesByGenre(selectedGenre);\n  loadMore.enableBtn();\n};\n\nconst clearHTML = () => {\n  libMoviesListEl.innerHTML = '';\n};\n\nconst clearLibrary = () => {\n  localStorage.removeItem('films');\n  libContainerEL.innerHTML = '';\n  renderNotification();\n};\n\nconst renderNotification = () => {\n  const notification = `<h2 class=\"lib-empty-message\">OOOPS...<br>We are very sorry!<br>You don't have any movies at your library.</h2>\n  <a class=\"lib-link-search\" href=\"./catalog.html\"> Search movie</a>`;\n  libContainerEL.insertAdjacentHTML('beforeend', notification);\n};\nconst onClearBtnClick = () => {\n  clearLibrary();\n};\n\nlibSelectEl.addEventListener('change', onLibSelectChange);\n\nwindow.addEventListener('load', () => {\n  if (!parsedFilms.length) {\n    libContainerEL.innerHTML = '';\n    renderNotification();\n    return;\n  }\n  renderFilteredGenres(parsedFilmsGenreIds);\n  loadMovies(parsedFilms);\n  checkArrLength(parsedFilms);\n});\n\nlibLoadMoreBtn.addEventListener('click', onLoadBtnClick);\n\nlibClearBtn.addEventListener('click', onClearBtnClick);\n\nexport { getGenreName, handleDeleteFilm };\n","const libRefs = {\n  libSelectEl: document.getElementById('js-genre-select'),\n  libMoviesListEl: document.getElementById('js-lib-list'),\n  libLoadMoreBtn: document.getElementById('js-loadMore-btn'),\n  libClearBtn: document.getElementById('clear-lib-btn'),\n  libContainerEL: document.getElementById('lib-container-el'),\n};\n\nexport { libRefs };\n","import { libRefs } from './lib-refs';\nimport { handleDeleteFilm, getGenreName } from './lib-main';\n\nconst { libSelectEl, libMoviesListEl } = libRefs;\n\nconst createLibSelectMarkup = genre => {\n  return `<option class=\"option-item\" value=\"${genre.id}\">${genre.name}</option>`;\n};\n\nconst createLibMoviesListMarkup = async ({\n  title,\n  name,\n  release_date,\n  first_air_date,\n  genresIds,\n  poster_path,\n  vote_average,\n  id,\n}) => {\n  const genreName = await getGenreName(genresIds);\n  const movieTitle = title || name;\n  const movieReleaseYear = release_date || first_air_date;\n  let imagePath;\n  if (poster_path !== null) {\n    imagePath = `https://image.tmdb.org/t/p/original/${poster_path}`;\n  } else {\n    imagePath =\n      'https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787';\n  }\n  return `<li class=\"mylibrary_movie is-id\"  data-id=${id}>\n  <div class=\"mylibrary_dark\">\n  <img src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${movieTitle}\" />\n  </div>\n <div class=\"mylibrary_overlay\"></div>\n  <div class=\"mylibrary_info\">\n  <h3 class=\"mylibrary_movies_name\">${movieTitle}</h3>\n  <p class=\"mylibrary_genre_movie\">${genreName} | ${movieReleaseYear.substring(\n    0,\n    4\n  )}</p>\n  </div>\n<div class=\"hero_star_raiting\">\n <span>\n<div class=\"Stars thisstars\" style=\"--rating: ${\n    vote_average / 2\n  }; \" aria-label=\"Rating of this product is ${(vote_average / 2).toFixed(\n    1\n  )} out of 5.\"></div>\n  </div>\n  </span>   \n  </li>`;\n};\n\nconst renderLibSelectMarkup = async genresArr => {\n  const libSelectMarkupEls = await Promise.all(\n    genresArr.map(genre => createLibSelectMarkup(genre))\n  );\n  libSelectEl.insertAdjacentHTML('beforeend', libSelectMarkupEls.join(' '));\n};\n\nconst renderLibMoviesListMarkup = async movies => {\n  const libMovieListMarkup = await Promise.all(\n    movies.map(movie => createLibMoviesListMarkup(movie))\n  );\n  libMoviesListEl.insertAdjacentHTML('beforeend', libMovieListMarkup.join(' '));\n\n  const deleteFilmButtons =\n    libMoviesListEl.querySelectorAll('.delete-film-btn');\n\n  deleteFilmButtons.forEach(button => {\n    button.addEventListener('click', handleDeleteFilm);\n  });\n};\n\nexport { renderLibMoviesListMarkup, renderLibSelectMarkup };\n","class LoadMoreBtn {\n  static classes = {\n    hidden: 'lib-btn-hidden',\n  };\n\n  constructor({ btnEl, isHidden = false }) {\n    this.button = btnEl;\n    isHidden && this.hideBtn();\n  }\n\n  getBtn(selector) {\n    return document.querySelector(selector);\n  }\n\n  hideBtn() {\n    this.button.classList.add(LoadMoreBtn.classes.hidden);\n  }\n\n  showBtn() {\n    this.button.classList.remove(LoadMoreBtn.classes.hidden);\n  }\n\n  disableBtn() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n\n  enableBtn() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load more';\n  }\n}\n\nexport { LoadMoreBtn };\n"],"names":["$bpxeT","parcelRequire","$01147738748aa13a$export$a53e322463ec8607","libSelectEl","document","getElementById","libMoviesListEl","libLoadMoreBtn","libClearBtn","libContainerEL","$693fde924ddead04$var$libSelectEl","$693fde924ddead04$var$libMoviesListEl","$693fde924ddead04$var$createLibSelectMarkup","genre","concat","id","name","$693fde924ddead04$var$createLibMoviesListMarkup","$parcel$interopDefault","$2TvXO","mark","_callee","param","title","release_date","first_air_date","genresIds","poster_path","vote_average","genreName","movieTitle","movieReleaseYear","$e984e962385f4ee6$export$e1e489d92e562b7b","_ctx","sent","substring","toFixed","_","$693fde924ddead04$export$c692ee4cf6f33e4e","genresArr","libSelectMarkupEls","Promise","all","map","insertAdjacentHTML","join","$693fde924ddead04$export$2bb7f8c502c8b895","movies","libMovieListMarkup","movie","querySelectorAll","forEach","button","addEventListener","$e984e962385f4ee6$export$503977e03a921dcd","$8MBJY","$91bfe49cf4d88e3f$export$fa7cf5edad276a21","LoadMoreBtn","btnEl","_isHidden","isHidden","this","hideBtn","key","selector","querySelector","classList","add","classes","hidden","remove","disabled","textContent","$hKHmD","$e984e962385f4ee6$var$libSelectEl","$e984e962385f4ee6$var$libMoviesListEl","$e984e962385f4ee6$var$libLoadMoreBtn","$e984e962385f4ee6$var$libClearBtn","$e984e962385f4ee6$var$libContainerEL","$e984e962385f4ee6$var$loadMore","$e984e962385f4ee6$var$selectedGenre","$e984e962385f4ee6$var$totalMoviesLoaded","$e984e962385f4ee6$var$getFilteredGenres","movieGenresIds","genres","$jyO6b","getGenre","filter","includes","movieGenreIds","filteredGenres","genreNames","slice","$e984e962385f4ee6$var$renderFilteredGenres","moviesArr","$e984e962385f4ee6$var$loadMovies","slicedArr","$e984e962385f4ee6$var$loadMoviesByGenre","selectedValue","$e984e962385f4ee6$var$filterMoviesListByGenre","$kaqNk","parsedFilms","$e984e962385f4ee6$var$checkArrLength","filteredMovies","parseInt","event","filmId","currentTarget","closest","dataset","console","log","$e984e962385f4ee6$var$removeItemFromLocalStorage","window","location","reload","items","JSON","parse","localStorage","getItem","index","findIndex","item","splice","setItem","stringify","length","showBtn","$e984e962385f4ee6$var$clearHTML","innerHTML","$e984e962385f4ee6$var$renderNotification","value","parsedFilmsGenreIds","disableBtn","enableBtn","removeItem"],"version":3,"file":"my-lib-page.5a6372fe.js.map"}