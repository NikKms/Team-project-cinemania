!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire8a95;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire8a95=r),r("i6wQM");var i=r("bpxeT"),o=r("2TvXO"),s=(r("bpxeT"),r("2TvXO"),r("8MBJY")),c=r("hKHmD"),u={pagination:document.getElementById("pagination"),catalogFilms:document.querySelector(".catalog-films")},l=(i=r("bpxeT"),o=r("2TvXO"),function(e){var t,n=e.map((function(e){return"<div data-id=".concat(e.id,' class="catalog-card">\n      <img src=\'https://image.tmdb.org/t/p/original').concat(e.poster,"' alt=\"").concat(e.title,'" loading="lazy" />\n      <div class="catalog-info">\n        <div>\n          <p class="catalog-info-name">\n            <b>').concat(e.title,'</b>\n          </p>\n          <p class="catalog-info-details">\n            <span>').concat(e.genres,'</span>\n            <span class="catalog-info-border" >').concat(e.date,'</span>\n          </p>\n        </div>\n        <div\n          class="Stars"\n          style="--rating: ').concat(e.rating/2,'"\n          aria-label="Rating of this product is 2.3 out of 5."\n        ></div>\n      </div>\n    </div>')})).join("");t=n,u.catalogFilms.innerHTML=t});var p,d=(p=e(i)(e(o).mark((function t(n){var a,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:a=e.sent,r=n.map((function(e){var t=e.id,n=e.title,r=e.poster_path,i=e.vote_average,o=e.genre_ids,s=e.release_date;return{id:t,title:n,poster:r,rating:i,genres:g(a,o),date:f(s)}})),l(r);case 5:case"end":return e.stop()}}),t)}))),function(e){return p.apply(this,arguments)}),g=function(e,t){var n=[];return e.map((function(e){var a=e.id,r=e.name;-1!==t.indexOf(a)&&n.push(r)})),n.slice(0,2).join(", ")},f=function(e){return new Date(e).getFullYear()},v=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},h=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},m=function t(n,a,r){"use strict";var i=this;e(s)(this,t),e(c)(this,"createButton",(function(){if(i.totalPages<=1)i.reset();else{i.arrPaginationItems=[],i.addFirstPages(i.arrPaginationItems),i.totalPages>6&&(i.addEllipsisIfNeeded(i.arrPaginationItems),i.addMiddlePages(i.arrPaginationItems),i.addEllipsisIfNeeded(i.arrPaginationItems,!0),i.addLastPage(i.arrPaginationItems));var e=i.createPagination(i.arrPaginationItems.join(""));i.render(e),v("currentPage",i.currentPage),i.getMovies(i.currentPage)}})),e(c)(this,"addFirstPages",(function(e){for(var t=1;t<=Math.min(3,i.totalPages);t++){var n=i.currentPage===t?"btn-active":"",a=i.createPaginationItem(t,n);e.push(a)}})),e(c)(this,"addMiddlePages",(function(e){for(var t=Math.max(4,i.currentPage-2),n=Math.min(i.currentPage+1,i.totalPages-1),a=t;a<=n;a++){var r=i.currentPage===a?"btn-active":"",o=i.createPaginationItem(a,r);e.push(o)}})),e(c)(this,"addEllipsisIfNeeded",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t&&i.currentPage<i.totalPages-2||!t&&i.currentPage>3)&&e.push('<li class="pagination-item">...</li>')})),e(c)(this,"addLastPage",(function(e){var t=i.totalPages,n=i.currentPage===t?"btn-active":"",a=i.createPaginationItem(t,n);e.push(a)})),e(c)(this,"createPaginationItem",(function(e,t){return"<li class='pagination-item ".concat(t,"'>\n              <a href='#' data-page='").concat(e,"' class='pagination-btn'>").concat(e,"</a>\n            </li>")})),e(c)(this,"createPagination",(function(e){return"\n      <div class='pagination ".concat(i.totalPages<=1?"pagination-hidden":"","'>\n        <div class=\"pagination-arrows ").concat(i.totalPages<=1?"pagination-arrows-hidden":"","\">\n          <button type=\"button\" class='pagination-arrow pagination-arrows-prev'>prev</button>\n          <button type=\"button\" class='pagination-arrow pagination-arrows-next'>next</button>\n        </div>\n        <ul class='pagination-list'>").concat(e,"</ul>\n      </div>")})),e(c)(this,"render",(function(e){i.reset(),u.catalogFilms.insertAdjacentHTML("afterend",e);var t=document.querySelector(".pagination"),n=document.querySelector(".pagination");t.addEventListener("click",i.handlerBtn),n.addEventListener("click",i.arrowHandler);var a=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===i.currentPage?a.style.display="none":a.style.display="block";var r=document.querySelector(".pagination-arrow.pagination-arrows-next");i.currentPage===i.totalPages?r.style.display="none":r.style.display="block"})),e(c)(this,"arrowHandler",(function(e){var t=e.target;t.classList.contains("pagination-arrows-prev")&&i.prev(),t.classList.contains("pagination-arrows-next")&&i.next()})),e(c)(this,"reset",(function(){var e=document.querySelector(".pagination");e&&e.remove()})),e(c)(this,"prev",(function(){if(1!==i.currentPage){i.currentPage-=1,i.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===i.currentPage?e.style.display="none":e.style.display="block"}})),e(c)(this,"next",(function(){if(i.currentPage!==i.totalPages){i.currentPage+=1,i.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-next");i.currentPage===i.totalPages?e.style.display="none":e.style.display="block"}})),e(c)(this,"handlerBtn",(function(e){e.preventDefault();var t=parseInt(e.target.dataset.page);isNaN(t)||(i.currentPage=t,i.createButton())})),this.totalPages=n,this.currentPage=a,this.getMovies=r,this.arrPaginationItems=[]},w=r("jyO6b"),y=r("dIxxU"),P="88b8a7c5d221d3120fb29d734050dc7d",b=function(){var t=e(i)(e(o).mark((function t(){var n,a,r,i,s,c,u,l=arguments;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:1,a=l.length>1?l[1]:void 0,r=h("searchTerm"),console.log(n,r,a),e.next=5,(0,w.getByQuery)(r,n,a);case 5:return i=e.sent,s=i.results,c=i.total_pages,u=i.page,d(s),e.abrupt("return",{results:s,total_pages:c,page:u});case 11:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=e(i)(e(o).mark((function t(n){var a,r,i,s,c,u,l=arguments;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,r=l.length>2&&void 0!==l[2]?l[2]:0,e.next=3,y.default.get("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(P,"&page=").concat(n).concat("&with_genres=".concat(a||"")).concat("&primary_release_year=".concat(r||""),"&language=en-US"));case 3:return i=e.sent.data,s=i.results,c=i.page,u=i.total_pages,d(s),e.abrupt("return",{results:s,page:c,total_pages:u});case 7:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=e(i)(e(o).mark((function t(){var n,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(P));case 2:return n=e.sent.data,a=n.genres,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=document.querySelector(".search-form"),_=document.querySelector("#selectGenres"),S=document.querySelector("#selectDate"),T=function(){var t=e(i)(e(o).mark((function t(){var n,a,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:n=e.sent,a=n.page,r=n.total_pages,new m(r,a,x).createButton(),localStorage.removeItem("searchTerm");case 8:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=e(i)(e(o).mark((function t(n){var a,r,i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:a=e.sent,r=a.page,i=a.total_pages,new m(i,r,b).createButton(),S.removeAttribute("disabled");case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=e(i)(e(o).mark((function t(){var n,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:n=e.sent,(a=n.map((function(e){return'<option value="'.concat(e.id,'">').concat(e.name,"</option>")}))).unshift("<option value='all'>All</option>"),_.innerHTML=a.join(""),_.removeAttribute("disabled");case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=e(i)(e(o).mark((function t(n){var a,r,i,s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.value,r=h("currentPage"),!h("searchTerm")){e.next=13;break}if("all"!==a){e.next=7;break}return b(r,0),e.abrupt("return");case 7:return e.next=9,b(r,a);case 9:return i=e.sent.results,d(i),console.log(i),e.abrupt("return");case 13:return e.next=15,x(r,a);case 15:s=e.sent.results,console.log(s),d(s);case 18:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=e(i)(e(o).mark((function t(n){var a,r,i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.value,r=h("currentPage"),i=h("searchTerm"),console.log(i),!i){e.next=8;break}if("all"!==a){e.next=8;break}return b(r,0),e.abrupt("return");case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();I.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()).searchMovies;n.length?(v("searchTerm",n),L(n)):T()})),window.addEventListener("load",T),window.addEventListener("load",M),window.addEventListener("load",(function(){for(var e=[],t=(new Date).getFullYear();t>=1970;t--)e.push('<option value="'.concat(t,'">').concat(t,"</option>"));S.innerHTML=e.join("")})),_.addEventListener("change",E),S.addEventListener("change",q),r("hVzVa"),r("h8OCG")}();
//# sourceMappingURL=catalog.c02cb720.js.map
