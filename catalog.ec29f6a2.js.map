{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_define_property.js","src/partials/js/refs.js","src/partials/js/catalog/createCards.js","src/partials/js/catalog/catalogUtils.js","src/partials/js/catalog/pagination.js","src/partials/js/catalog/catalogApi.js","src/partials/js/catalog/example.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","const refs = {\n  pagination: document.getElementById('pagination'),\n  //_______Catalog_______\n  catalogFilms: document.querySelector('.catalog-films'),\n  //____________________\n};\n\nexport { refs };\n","import { refs } from '../refs';\n\nexport const createCards = dataCard => {\n  const markup = dataCard\n    .map(card => {\n      return `<div data-id=${card.id} class=\"catalog-card\">\n      <img src='https://image.tmdb.org/t/p/original${card.poster}' alt=\"${\n        card.title\n      }\" loading=\"lazy\" />\n      <div class=\"catalog-info\">\n        <div>\n          <p class=\"catalog-info-name\">\n            <b>${card.title}</b>\n          </p>\n          <p class=\"catalog-info-details\">\n            <span>${card.genres}</span>\n            <span class=\"catalog-info-border\" >${card.date}</span>\n          </p>\n        </div>\n        <div\n          class=\"Stars\"\n          style=\"--rating: ${card.rating / 2}\"\n          aria-label=\"Rating of this product is 2.3 out of 5.\"\n        ></div>\n      </div>\n    </div>`;\n    })\n    .join('');\n  addHTML(markup);\n  //console.log(markup);\n  //   dataCard.map(el => console.log(el));\n};\n\nfunction addHTML(cards) {\n  refs.catalogFilms.innerHTML = cards;\n}\n","import { fetchGenre } from './catalogApi';\nimport { createCards } from './createCards';\n\nconst createDataCards = async moviesData => {\n  const genre = await fetchGenre();\n  const newCardsDate = moviesData.map(\n    ({ id, title, poster_path, vote_average, genre_ids, release_date }) => {\n      return {\n        id: id,\n        title: title,\n        poster: poster_path,\n        rating: vote_average,\n        genres: createGenreStr(genre, genre_ids),\n        date: createMovieDate(release_date),\n      };\n    }\n  );\n  createCards(newCardsDate);\n};\n\nconst createGenreStr = (genre, genre_ids) => {\n  const genres = [];\n  genre.map(({ id, name }) => {\n    if (genre_ids.indexOf(id) !== -1) {\n      genres.push(name);\n    }\n  });\n  return genres.slice(0, 2).join(', ');\n  //return genres.join('');\n};\n\nconst createMovieDate = dateString => {\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  return year;\n};\n\nconst saveLocal = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst loadLocal = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {\n  createDataCards,\n  createGenreStr,\n  createMovieDate,\n  saveLocal,\n  loadLocal,\n};\n","import { refs } from '../refs';\nimport { saveLocal } from './catalogUtils';\n\nexport default class Pagination {\n  constructor(totalPages, page, getMovies) {\n    this.totalPages = totalPages;\n    this.currentPage = page;\n    this.getMovies = getMovies;\n    this.arrPaginationItems = [];\n  }\n\n  createButton = () => {\n    if (this.totalPages <= 1) {\n      this.reset();\n      return;\n    }\n\n    this.arrPaginationItems = [];\n\n    this.addFirstPages(this.arrPaginationItems);\n    if (this.totalPages > 6) {\n      this.addEllipsisIfNeeded(this.arrPaginationItems);\n      this.addMiddlePages(this.arrPaginationItems);\n      this.addEllipsisIfNeeded(this.arrPaginationItems, true);\n      this.addLastPage(this.arrPaginationItems);\n    }\n\n    const markup = this.createPagination(this.arrPaginationItems.join(''));\n    this.render(markup);\n    saveLocal('currentPage', this.currentPage);\n    this.getMovies(this.currentPage);\n  };\n\n  addFirstPages = arr => {\n    for (let page = 1; page <= Math.min(3, this.totalPages); page++) {\n      const activeEl = this.currentPage === page ? 'btn-active' : '';\n      const btn = this.createPaginationItem(page, activeEl);\n      arr.push(btn);\n    }\n  };\n\n  addMiddlePages = arr => {\n    const startPage = Math.max(4, this.currentPage - 2);\n    const endPage = Math.min(this.currentPage + 1, this.totalPages - 1);\n    for (let page = startPage; page <= endPage; page++) {\n      const activeEl = this.currentPage === page ? 'btn-active' : '';\n      const btn = this.createPaginationItem(page, activeEl);\n      arr.push(btn);\n    }\n  };\n\n  addEllipsisIfNeeded = (arr, atEnd = false) => {\n    if (\n      (atEnd && this.currentPage < this.totalPages - 2) ||\n      (!atEnd && this.currentPage > 3)\n    ) {\n      arr.push('<li class=\"pagination-item\">...</li>');\n    }\n  };\n\n  addLastPage = arr => {\n    const lastPage = this.totalPages;\n    const activeEl = this.currentPage === lastPage ? 'btn-active' : '';\n    const btn = this.createPaginationItem(lastPage, activeEl);\n    arr.push(btn);\n  };\n\n  createPaginationItem = (page, activeClass) => {\n    return `<li class='pagination-item ${activeClass}'>\n              <a href='#' data-page='${page}' class='pagination-btn'>${page}</a>\n            </li>`;\n  };\n\n  createPagination = paginationItems => {\n    const paginationContainer = `\n      <div class='pagination ${\n        this.totalPages <= 1 ? 'pagination-hidden' : ''\n      }'>\n        <div class=\"pagination-arrows ${\n          this.totalPages <= 1 ? 'pagination-arrows-hidden' : ''\n        }\">\n          <button type=\"button\" class='pagination-arrow pagination-arrows-prev'>prev</button>\n          <button type=\"button\" class='pagination-arrow pagination-arrows-next'>next</button>\n        </div>\n        <ul class='pagination-list'>${paginationItems}</ul>\n      </div>`;\n    return paginationContainer;\n  };\n\n  render = pagination => {\n    this.reset();\n    refs.catalogFilms.insertAdjacentHTML('afterend', pagination);\n    const el = document.querySelector('.pagination');\n    const paginationContainer = document.querySelector('.pagination');\n\n    el.addEventListener('click', this.handlerBtn);\n    paginationContainer.addEventListener('click', this.arrowHandler);\n\n    const prevButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-prev'\n    );\n    if (this.currentPage === 1) {\n      prevButton.style.display = 'none';\n    } else {\n      prevButton.style.display = 'block';\n    }\n\n    const nextButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-next'\n    );\n    if (this.currentPage === this.totalPages) {\n      nextButton.style.display = 'none';\n    } else {\n      nextButton.style.display = 'block';\n    }\n  };\n\n  arrowHandler = e => {\n    const targetEl = e.target;\n\n    if (targetEl.classList.contains('pagination-arrows-prev')) {\n      this.prev();\n    }\n    if (targetEl.classList.contains('pagination-arrows-next')) {\n      this.next();\n    }\n  };\n\n  reset = () => {\n    const el = document.querySelector('.pagination');\n    if (el) el.remove();\n  };\n\n  prev = () => {\n    if (this.currentPage === 1) return;\n    this.currentPage -= 1;\n    this.createButton();\n\n    const prevButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-prev'\n    );\n    if (this.currentPage === 1) {\n      prevButton.style.display = 'none';\n    } else {\n      prevButton.style.display = 'block';\n    }\n  };\n\n  next = () => {\n    if (this.currentPage === this.totalPages) return;\n    this.currentPage += 1;\n    this.createButton();\n\n    const nextButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-next'\n    );\n    if (this.currentPage === this.totalPages) {\n      nextButton.style.display = 'none';\n    } else {\n      nextButton.style.display = 'block';\n    }\n  };\n\n  handlerBtn = e => {\n    e.preventDefault();\n    const page = parseInt(e.target.dataset.page);\n    if (!isNaN(page)) {\n      this.currentPage = page;\n      this.createButton();\n    }\n  };\n}\n","import Pagination from './pagination';\nimport { getByQuery } from '../api';\nimport { createDataCards, loadLocal } from './catalogUtils';\nimport axios from 'axios';\n\nconst API_KEY = '88b8a7c5d221d3120fb29d734050dc7d';\n\nexport const getMoviesByQuery = async (chosenPage = 1, genre_id) => {\n  const searchTerm = loadLocal('searchTerm');\n  console.log(chosenPage, searchTerm, genre_id);\n  const { results, total_pages, page } = await getByQuery(\n    searchTerm,\n    chosenPage,\n    genre_id\n  );\n  createDataCards(results);\n  return {\n    results,\n    total_pages,\n    page,\n  };\n};\n\nexport const showNewestMovies = async (currentPage, genre_id = 0, date = 0) => {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/movie/now_playing?api_key=${API_KEY}&page=${currentPage}${`&with_genres=${\n      genre_id ? genre_id : ''\n    }`}${`&primary_release_year=${date ? date : ''}`}&language=en-US`\n  );\n  const { results, page, total_pages } = data;\n  createDataCards(results);\n  return {\n    results,\n    page,\n    total_pages,\n  };\n};\n\nexport const fetchGenre = async () => {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`\n  );\n  const { genres } = data;\n  return genres;\n};\n","import { fetchGenre, getMoviesByQuery, showNewestMovies } from './catalogApi';\nimport { createDataCards, loadLocal, saveLocal } from './catalogUtils';\nimport Pagination from './pagination';\n\nconst searchForm = document.querySelector('.search-form');\nconst selectGenres = document.querySelector('#selectGenres');\nconst selectDate = document.querySelector('#selectDate');\n\nconst submitHandler = e => {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const { searchMovies } = Object.fromEntries(formData.entries());\n  if (!searchMovies.length) {\n    afterLoad();\n    return;\n  }\n  saveLocal('searchTerm', searchMovies);\n  afterSearching(searchMovies);\n};\n\nconst afterLoad = async () => {\n  const { page, total_pages } = await showNewestMovies();\n  const pagination = new Pagination(total_pages, page, showNewestMovies);\n  pagination.createButton();\n  localStorage.removeItem('searchTerm');\n};\n\nconst afterSearching = async searchMovies => {\n  const { page, total_pages } = await getMoviesByQuery();\n  const pagination = new Pagination(total_pages, page, getMoviesByQuery);\n  pagination.createButton();\n  selectDate.removeAttribute('disabled');\n};\n\nconst filterSelectOptions = async () => {\n  const genres = await fetchGenre();\n  let arrOptions = genres.map(option => {\n    return `<option value=\"${option.id}\">${option.name}</option>`;\n  });\n  arrOptions.unshift(`<option value='all'>All</option>`);\n  selectGenres.innerHTML = arrOptions.join('');\n  selectGenres.removeAttribute('disabled');\n};\n\nconst setGenreFilter = async e => {\n  const value = e.target.value;\n  const currentPage = loadLocal('currentPage');\n  const searchTerm = loadLocal('searchTerm');\n\n  if (searchTerm) {\n    if (value === 'all') {\n      getMoviesByQuery(currentPage, 0);\n      return;\n    }\n    const { results } = await getMoviesByQuery(currentPage, value);\n    createDataCards(results);\n    console.log(results);\n    return;\n  }\n  const { results } = await showNewestMovies(currentPage, value);\n  console.log(results);\n  createDataCards(results);\n};\n\nconst dateSelectOptions = () => {\n  const endDate = 1970;\n  const startDate = new Date().getFullYear();\n\n  const yearList = [];\n\n  for (let i = startDate; i >= endDate; i--) {\n    yearList.push(`<option value=\"${i}\">${i}</option>`);\n  }\n\n  selectDate.innerHTML = yearList.join('');\n};\n\nconst setDateFilter = async e => {\n  const value = e.target.value;\n  const currentPage = loadLocal('currentPage');\n  const searchTerm = loadLocal('searchTerm');\n\n  console.log(searchTerm);\n  if (searchTerm) {\n    if (value === 'all') {\n      getMoviesByQuery(currentPage, 0);\n      return;\n    }\n  }\n};\n\nsearchForm.addEventListener('submit', submitHandler);\nwindow.addEventListener('load', afterLoad);\nwindow.addEventListener('load', filterSelectOptions);\nwindow.addEventListener('load', dateSelectOptions);\nselectGenres.addEventListener('change', setGenreFilter);\nselectDate.addEventListener('change', setDateFilter);\n\nexport { createDataCards };\n"],"names":["Object","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$97b4d273c2f21ef2$export$21666b427502ea6d","pagination","document","getElementById","catalogFilms","querySelector","$900f3e5968da7b57$export$659b6b545718ce73","dataCard","markup","map","card","id","poster","title","genres","date","rating","join","cards","innerHTML","$80ce91662cd26072$export$f3fd225445632348","async","moviesData","genre","$df1db51f1d31cfcf$export$13a873f6c4b5d516","newCardsDate","poster_path","vote_average","genre_ids","release_date","$80ce91662cd26072$export$44f0485a2f926b66","$80ce91662cd26072$export$e57ec8acbf34a811","name","indexOf","push","slice","dateString","Date","getFullYear","$80ce91662cd26072$export$b38f1b11c5e38f18","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$80ce91662cd26072$export$9f183916f445c495","getItem","undefined","parse","$f2e078fcec063076$export$2e2bcd8739ae039","constructor","totalPages","page1","getMovies","$parcel$interopDefault","this","reset","arrPaginationItems","addFirstPages","addEllipsisIfNeeded","addMiddlePages","addLastPage","createPagination","render","currentPage","arr","page","Math","min","activeEl","btn","createPaginationItem","startPage","max","endPage","atEnd","lastPage","activeClass","paginationItems","insertAdjacentHTML","el","paginationContainer","addEventListener","handlerBtn","arrowHandler","prevButton","style","display","nextButton","e","targetEl","target","classList","contains","prev","next","remove","createButton","preventDefault","parseInt","dataset","isNaN","$df1db51f1d31cfcf$export$4a3145eab4db56d2","chosenPage","genre_id","searchTerm","log","results","total_pages","$19F3f","getByQuery","$df1db51f1d31cfcf$export$49f9e704d857526c","data","$2shzp","get","$e5c465ec961d44e9$var$searchForm","$e5c465ec961d44e9$var$selectGenres","$e5c465ec961d44e9$var$selectDate","$e5c465ec961d44e9$var$afterLoad","removeItem","$e5c465ec961d44e9$var$afterSearching","searchMovies","removeAttribute","formData","FormData","fromEntries","entries","length","window","arrOptions","option","unshift","yearList","i"],"version":3,"file":"catalog.ec29f6a2.js.map"}