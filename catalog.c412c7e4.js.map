{"mappings":"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","sources":["src/partials/js/catalog/example.js","src/partials/js/catalog/pagination.js","src/partials/js/catalog/catalogApi.js","src/partials/js/refs.js","src/partials/js/catalog/createCards.js","src/partials/js/catalog/catalogUtils.js"],"sourcesContent":["import { getMoviesByQuery, showNewestMovies } from './catalogApi';\nimport { loadLocal, saveLocal } from './catalogUtils';\nimport Pagination from './pagination';\n\nconst searchForm = document.querySelector('.search-form');\n\nconst submitHandler = e => {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const { searchMovies } = Object.fromEntries(formData.entries());\n  if (!searchMovies.length) {\n    afterLoad();\n    return;\n  }\n  saveLocal('searchTerm', searchMovies);\n  afterSearching(searchMovies);\n};\n\nconst afterLoad = async () => {\n  const { page, total_pages } = await showNewestMovies();\n  const pagination = new Pagination(total_pages, page, showNewestMovies);\n  pagination.createButton();\n};\n\nconst afterSearching = async searchMovies => {\n  const { page, total_pages } = await getMoviesByQuery();\n  const pagination = new Pagination(total_pages, page, getMoviesByQuery);\n  pagination.createButton();\n};\n\nsearchForm.addEventListener('submit', submitHandler);\nwindow.addEventListener('load', afterLoad);\n\nexport { createDataCards };\n","import { refs } from '../refs';\nimport { saveLocal } from './catalogUtils';\n\nexport default class Pagination {\n  constructor(totalPages, page, getMovies) {\n    this.totalPages = totalPages;\n    this.currentPage = page;\n    this.getMovies = getMovies;\n  }\n\n  createButton = () => {\n    const arrPaginationItems = [];\n\n    this.addFirstPages(arrPaginationItems);\n    this.totalPages > 3 && this.addEllipsisIfNeeded(arrPaginationItems);\n    this.totalPages > 3 && this.addMiddlePages(arrPaginationItems);\n    this.totalPages > 3 && this.addEllipsisIfNeeded(arrPaginationItems, true);\n    this.totalPages > 3 && this.addLastPage(arrPaginationItems);\n\n    const markup = this.createPagination(arrPaginationItems.join(''));\n    this.render(markup);\n    saveLocal('currentPage', this.currentPage);\n    this.getMovies(this.currentPage);\n  };\n\n  addFirstPages = arr => {\n    for (let page = 1; page <= Math.min(3, this.totalPages); page++) {\n      const activeEl = this.currentPage === page ? 'btn-active' : '';\n      const btn = this.createPaginationItem(page, activeEl);\n      arr.push(btn);\n    }\n  };\n\n  addMiddlePages = arr => {\n    const startPage = Math.max(4, this.currentPage - 2);\n    const endPage = Math.min(this.currentPage + 1, this.totalPages - 1);\n    for (let page = startPage; page <= endPage; page++) {\n      const activeEl = this.currentPage === page ? 'btn-active' : '';\n      const btn = this.createPaginationItem(page, activeEl);\n      arr.push(btn);\n    }\n  };\n\n  addEllipsisIfNeeded = (arr, atEnd = false) => {\n    if (\n      (atEnd && this.currentPage < this.totalPages - 2) ||\n      (!atEnd && this.currentPage > 3)\n    ) {\n      arr.push('<li class=\"pagination-item\">...</li>');\n    }\n  };\n\n  addLastPage = arr => {\n    const lastPage = this.totalPages;\n    const activeEl = this.currentPage === lastPage ? 'btn-active' : '';\n    const btn = this.createPaginationItem(lastPage, activeEl);\n    arr.push(btn);\n  };\n\n  createPaginationItem = (page, activeClass) => {\n    return `<li class='pagination-item ${activeClass}'>\n              <a href='#' data-page='${page}' class='pagination-btn'>${page}</a>\n            </li>`;\n  };\n\n  createPagination = paginationItems => {\n    return `<ul class='pagination'>${paginationItems}</ul>`;\n  };\n\n  render = pagination => {\n    this.reset();\n    refs.catalogFilms.insertAdjacentHTML('afterend', pagination);\n    const el = document.querySelector('.pagination');\n    el.addEventListener('click', this.handlerBtn);\n  };\n\n  reset = () => {\n    const el = document.querySelector('.pagination');\n    if (el) el.remove();\n  };\n\n  handlerBtn = e => {\n    e.preventDefault();\n    const page = parseInt(e.target.dataset.page);\n    if (!isNaN(page)) {\n      this.currentPage = page;\n      this.createButton();\n    }\n  };\n}\n","import Pagination from './pagination';\nimport { getByQuery } from '../api';\nimport { createDataCards, loadLocal } from './catalogUtils';\nimport axios from 'axios';\n\nconst API_KEY = '88b8a7c5d221d3120fb29d734050dc7d';\n\nexport const getMoviesByQuery = async (chosenPage = 1) => {\n  const searchTerm = loadLocal('searchTerm');\n  console.log(chosenPage, searchTerm);\n  const { results, total_pages, page } = await getByQuery(\n    searchTerm,\n    chosenPage\n  );\n  createDataCards(results);\n  return {\n    results,\n    total_pages,\n    page,\n  };\n};\n\nexport const showNewestMovies = async currentPage => {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/movie/now_playing?api_key=${API_KEY}&page=${currentPage}&language=en-US`\n  );\n  const { results, page, total_pages } = data;\n  createDataCards(results);\n  return {\n    results,\n    page,\n    total_pages,\n  };\n};\n\nexport const fetchGenre = async () => {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`\n  );\n  const { genres } = data;\n  return genres;\n};\n","const refs = {\n  pagination: document.getElementById('pagination'),\n  //_______Catalog_______\n  catalogFilms: document.querySelector('.catalog-films'),\n  //____________________\n};\n\nexport { refs };\n","import { refs } from '../refs';\n\nexport const createCards = dataCard => {\n  const markup = dataCard\n    .map(card => {\n      return `<div data-id=${card.id} class=\"catalog-card\">\n      <img src='https://image.tmdb.org/t/p/original${card.poster}' alt=\"${\n        card.title\n      }\" loading=\"lazy\" />\n      <div class=\"catalog-info\">\n        <div>\n          <p class=\"catalog-info-name\">\n            <b>${card.title}</b>\n          </p>\n          <p class=\"catalog-info-details\">\n            <span>${card.genres}</span>\n            <span class=\"catalog-info-border\" >${card.date}</span>\n          </p>\n        </div>\n        <div\n          class=\"Stars\"\n          style=\"--rating: ${card.rating / 2}\"\n          aria-label=\"Rating of this product is 2.3 out of 5.\"\n        ></div>\n      </div>\n    </div>`;\n    })\n    .join('');\n  addHTML(markup);\n  //console.log(markup);\n  //   dataCard.map(el => console.log(el));\n};\n\nfunction addHTML(cards) {\n  refs.catalogFilms.innerHTML = cards;\n}\n","import { fetchGenre } from './catalogApi';\nimport { createCards } from './createCards';\n\nconst createDataCards = async moviesData => {\n  //console.log(moviesData);\n  const genre = await fetchGenre();\n  const newCardsDate = moviesData.map(\n    ({ id, title, poster_path, vote_average, genre_ids, release_date }) => {\n      return {\n        id: id,\n        title: title,\n        poster: poster_path,\n        rating: vote_average,\n        genres: createGenreStr(genre, genre_ids),\n        date: createMovieDate(release_date),\n      };\n    }\n  );\n  createCards(newCardsDate);\n};\n\nconst createGenreStr = (genre, genre_ids) => {\n  const genres = [];\n  genre.map(({ id, name }) => {\n    if (genre_ids.indexOf(id) !== -1) {\n      genres.push(name);\n    }\n  });\n  return genres.join(',');\n};\n\nconst createMovieDate = dateString => {\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  return year;\n};\n\nconst saveLocal = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst loadLocal = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {\n  createDataCards,\n  createGenreStr,\n  createMovieDate,\n  saveLocal,\n  loadLocal,\n};\n"],"names":["$bpxeT","parcelRequire","$8MBJY","$5f0c02a003d98366$export$21666b427502ea6d","pagination","document","getElementById","catalogFilms","querySelector","$66edc2a1388134fa$export$659b6b545718ce73","dataCard","cards","markup","map","card","concat","id","poster","title","genres","date","rating","join","innerHTML","$1fe4b2be6ef53714$export$f3fd225445632348","$parcel$interopDefault","$2TvXO","mark","_callee","moviesData","genre","newCardsDate","$fe622946adcb22aa$export$13a873f6c4b5d516","_ctx","sent","param","poster_path","vote_average","genre_ids","release_date","$1fe4b2be6ef53714$export$44f0485a2f926b66","$1fe4b2be6ef53714$export$e57ec8acbf34a811","name","indexOf","push","dateString","Date","getFullYear","$1fe4b2be6ef53714$export$b38f1b11c5e38f18","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$1fe4b2be6ef53714$export$9f183916f445c495","getItem","undefined","parse","$eca5539537a6497d$export$2e2bcd8739ae039","Pagination","totalPages","page1","getMovies","$hKHmD","this","arrPaginationItems","_this","addFirstPages","addEllipsisIfNeeded","addMiddlePages","addLastPage","createPagination","render","currentPage","arr","_$page","Math","min","activeEl","btn","createPaginationItem","startPage","max","endPage","atEnd","arguments","length","lastPage","page","activeClass","paginationItems","reset","insertAdjacentHTML","addEventListener","handlerBtn","el","remove","e","preventDefault","parseInt","target","dataset","isNaN","createButton","$fe622946adcb22aa$var$API_KEY","$fe622946adcb22aa$export$4a3145eab4db56d2","chosenPage","searchTerm","ref","results","total_pages","_args","log","$jyO6b","getByQuery","$fe622946adcb22aa$export$49f9e704d857526c","data","$dIxxU","default","get","$bfa640fc158a0d39$var$searchForm","$bfa640fc158a0d39$var$afterLoad","$bfa640fc158a0d39$var$afterSearching","searchMovies","formData","FormData","Object","fromEntries","entries","window"],"version":3,"file":"catalog.c412c7e4.js.map"}