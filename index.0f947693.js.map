{"mappings":"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","sources":["src/partials/js/home/example-home.js","src/partials/js/footer/footer.js"],"sourcesContent":["import * as hero from '../../js/modal';\nimport { getWeeklyTrending } from '../api';\nimport { getUpcoming } from '../api';\nimport { getGenre } from '../api';\nimport { addFilmToStorage } from '../my-lib/lib-storage';\n\nconst listOfFilms = document.querySelector('.weekly-cards-wrap');\nconst upcomingWrapEl = document.querySelector('.upcoming_wrap');\nconst seeAll = document.querySelector('.weekly-title-link');\nlet addToLibBtn = null;\n\n// ================See all=================\n\n// seeAll.addEventListener('click', () => {\n//   location.href = 'catalog.html';\n// });\n\n// ================ Weekly trends section ==============\n\nasync function getWeeklyTrends() {\n  const data = await getWeeklyTrending();\n\n  const firstThreeFilms = getFirstThreeElements(data.results);\n  renderWeeklyThreeTrends(firstThreeFilms);\n}\n\nfunction getFirstThreeElements(array) {\n  return array.slice(0, 3);\n}\n\nasync function renderWeeklyThreeTrends(firstThreeFilms) {\n  console.log(firstThreeFilms);\n  const markup = await Promise.all(\n    firstThreeFilms.map(\n      async ({\n        backdrop_path,\n        title,\n        release_date,\n        genre_ids,\n        id,\n        poster_path,\n        name,\n        first_air_date,\n        vote_average,\n      }) => {\n        genre_ids = filterGenres(genre_ids);\n        const listGenres = await getGenresById(genre_ids);\n\n        return `<li class=\"weekly-card is-id\" data-id=${id}>\n        <div class=\"weekly-container-image\">\n          <img\n            class=\"weekly-card-image\"\n           src=\"https://image.tmdb.org/t/p/original/${poster_path}\"\n            alt=\"\"\n          />\n         <div class=\"overlay\"></div>       \n        </div>\n  <div class=\"weekly-card-description\">\n    <h3 class=\"weekly-card-description-title\">${title || name}</h3>\n    <div class='weekly-card-description-wrap'>\n       <p class=\"weekly-card-description-other\">${listGenres} | ${\n          release_date\n            ? release_date.substring(0, 4)\n            : first_air_date.substring(0, 4)\n        }</p>\n\n     <div class=\"Stars\" style=\"--rating: ${parseFloat(\n       (vote_average / 2).toFixed(1)\n     )};\" aria-label=\"Rating of this product is 2.3 out of 5.\"></div>\n      </div>\n  </div>\n      </li>`;\n      }\n    )\n  );\n\n  listOfFilms.innerHTML = markup.join('');\n}\n\nasync function getGenresById(ids) {\n  const data = await getGenre();\n  const genres = data.genres;\n\n  const arrGenres = ids.map(id => {\n    const genre = genres.find(genre => genre.id === id);\n    return genre ? genre.name : '';\n  });\n  return arrGenres.join(', ');\n}\n\n// ================ Upcoming this month section ==============\n\nasync function getUpcomingFilm() {\n  const { formattedStartDate, formattedEndDate } =\n    getCurrentEndLastDayOfMonth();\n  try {\n    const data = await getUpcoming(formattedStartDate, formattedEndDate);\n    const randomValue = getRandomValue(data.results);\n    renderUpcomingFilm(randomValue);\n  } catch (error) {\n    upcomingWrapEl.insertAdjacentHTML(\n      'beforeend',\n      '<p class=\"upcoming-not-found\">OOPS...We are very sorry! We don’t have any results</p>'\n    );\n  }\n}\n\nasync function renderUpcomingFilm(upcomingFilm) {\n  let {\n    backdrop_path,\n    poster_path,\n    genre_ids,\n    popularity,\n    release_date,\n    title,\n    vote_average,\n    vote_count,\n    overview,\n  } = upcomingFilm;\n  console.log('upcomingFilm: ', upcomingFilm);\n\n  genre_ids = filterGenres(genre_ids);\n\n  const listGenres = await getGenresById(genre_ids);\n\n  const isMobile = window.innerWidth < 767;\n  let imagePath = getImagePath(backdrop_path, poster_path, isMobile);\n\n  const markup = `<div class=\"upcoming-card\">\n\n            <img class=\"upcoming-card-img\" src=\"${imagePath}\" alt=\" \" />\n\n          <div class=\"upcoming-card-wrap\">\n            <h3 class=\"upcoming-card-title\">${title}</h3>\n\n            <div class=\"upcoming-card-numbers-wrap-top\">\n              <div class=\"upcoming-card-release-wrap\">\n                <span class=\"upcoming-card-release-text\">Release date</span>\n                <span class=\"upcoming-card-release-data\">${release_date}</span>\n              </div>\n\n              <div class=\"upcoming-card-vote-wrap\">\n                <div class=\"upcoming-card-vote\"><span>Vote / Votes</span></div>\n                <div class=\"upcoming-card-vote-data\">\n                  <span>${vote_average}</span> / <span>${vote_count}</span>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"upcoming-card-numbers-wrap-down\">\n              <div class=\"upcoming-card-popularity-wrap\">\n                <span class=\"upcoming-card-popularity-text\">Popularity</span>\n                <span class=\"upcoming-card-popularity-data\">${popularity.toFixed(\n                  1\n                )}</span>\n              </div>\n\n              <div class=\"upcoming-card-genre-wrap\">\n                <span class=\"upcoming-card-genre-text\">Genre</span>\n                <span class=\"upcoming-card-genre-data\">${listGenres}</span>\n              </div>\n            </div>\n \n            <span class=\"upcoming-card-about-title\">About</span>\n\n            <p class=\"upcoming-card-about-text\">${overview}</p>\n\n            <button class=\"upcoming-button\" id=\"add-to-lib\" type=\"button\">\n              Add to my library\n            </button>\n          </div>\n        </div>`;\n  upcomingWrapEl.insertAdjacentHTML('beforeend', markup);\n\n  addToLibBtn = document.getElementById('add-to-lib');\n\n  const addToLib = evt => {\n    addFilmToStorage(upcomingFilm);\n  };\n  addToLibBtn.addEventListener('click', addToLib);\n}\n\n// Функція для визначення шляху зображення на основі ширини екрану\n\nfunction getImagePath(backdropPath, posterPath, isMobile) {\n  if (isMobile === true && posterPath !== null) {\n    return `https://image.tmdb.org/t/p/original/${posterPath}`;\n  } else if (isMobile === false && backdropPath !== null) {\n    return `https://image.tmdb.org/t/p/original/${backdropPath}`;\n  } else if (\n    isMobile === false &&\n    backdropPath === null &&\n    posterPath !== null\n  ) {\n    return `https://image.tmdb.org/t/p/original/${posterPath}`;\n  } else if (\n    isMobile === true &&\n    posterPath === null &&\n    backdropPath !== null\n  ) {\n    return `https://image.tmdb.org/t/p/original/${backdropPath}`;\n  } else {\n    return 'https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787';\n  }\n}\n\nfunction filterGenres(genre_ids) {\n  if (genre_ids.length > 2) {\n    return genre_ids.slice(0, 2);\n  }\n\n  return genre_ids;\n}\n\nfunction getCurrentEndLastDayOfMonth() {\n  const currentDate = new Date();\n  const currentYear = currentDate.getFullYear();\n  const currentMonth = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const currentDay = String(currentDate.getDate()).padStart(2, '0');\n\n  const formattedStartDate = `${currentYear}-${currentMonth}-${currentDay}`;\n\n  const nextMonthFirstDay = new Date(currentYear, currentMonth, 1);\n  const lastDayOfMonth = new Date(nextMonthFirstDay - 1).getDate();\n  const lastDayOfMonthFormatted = String(lastDayOfMonth).padStart(2, '0');\n\n  const formattedEndDate = `${currentYear}-${currentMonth}-${lastDayOfMonthFormatted}`;\n\n  return { formattedStartDate, formattedEndDate };\n}\n\n// =========== function getRandomValue =============\n\nfunction getRandomValue(array) {\n  const randomIndex = Math.floor(Math.random() * array.length);\n  return array[randomIndex];\n}\n\nwindow.addEventListener('DOMContentLoaded', getUpcomingFilm);\nwindow.addEventListener('DOMContentLoaded', getWeeklyTrends);\n\nexport { getGenresById, filterGenres };\n","// MODAL WINDOW FOOTER\n\n// ШАГ 1. Думаем, на какие места мы будем жать и ждать действий. Это наш спан в футере, кнопка закрытия модалки, бэкдроп и кнопка ESC. Для этих кнопок нужно получить ссылки.\nrefs = {\n  footerLink: document.querySelector('.footer-link'),\n  closeButton: document.querySelector('.close-button-team'),\n  backdropTeam: document.querySelector('.backdrop-team'),\n};\n\n// Шаг2. Чтобы получить действия по клику, нужно словить клики Листенером и добавить функции, которые будут делать определенные действия. Одна функция будет убирать is-hidden, а другая будет добавлять. На футерлинк у нас будет убираться, а на крестик и бэкдроп добавляться класс is-hidden. Класс будет добавляться и исчезать на элементе бэкдроп.\n\n// refs.footerLink.addEventListener('click', removeIsHiddenOnClick);\n// refs.closeButton.addEventListener('click', addIsHiddenOnClick);\n// refs.backdropTeam.addEventListener('click', addIsHiddenOnClick);\n\n// Шаг 3. Внизу расписываем сами функции. Первая убирает класс, вторая - добавляет.\n\n// function removeIsHiddenOnClick(e) {\n//   refs.backdropTeam.classList.remove('is-hidden');\n\n//   document.addEventListener('keydown', e => {\n//     if (\n//       e.code === 'Escape'\n//       // refs.backdropTeam.classList.contains('is-hidden')//\n//     ) {\n//       addIsHiddenOnClick();\n//     }\n//   });\n// }\n\n// function addIsHiddenOnClick(e) {\n//   if (!e.target.classList.contains(\"modal-team\"))\n//   { refs.backdropTeam.classList.add('is-hidden') };\n// }\n// function toggleIsHiddenOnClick(e) {\n//   refs.backdropTeam.classList.toggle('is-hidden');\n\n// }\n\n// function addIsHiddenOnClick(e) {\n//   refs.backdropTeam.classList.add('is-hidden');\n// }\n\n// function isItABackdrop(e) {\n//   if (\n//     e.target.classList.contains('backdropTeam') &&\n//     !e.target.classList.contains('modal-team')\n//   ) {\n//     toggleIsHiddenOnClick();\n//   }\n// }\n\n//Шаг 4 добавляем функцию закрывания кнопкой ESC\n"],"names":["$bpxeT","parcelRequire","$ef95d285b54824a0$var$listOfFilms","document","querySelector","$ef95d285b54824a0$var$upcomingWrapEl","$ef95d285b54824a0$var$addToLibBtn","$ef95d285b54824a0$var$_getWeeklyTrends","$parcel$interopDefault","$2TvXO","mark","_callee","data","$jyO6b","getWeeklyTrending","_ctx","sent","$ef95d285b54824a0$var$renderWeeklyThreeTrends","$ef95d285b54824a0$var$getFirstThreeElements","results","apply","this","arguments","array","slice","firstThreeFilms","$ef95d285b54824a0$var$_renderWeeklyThreeTrends","_callee1","markup","console","log","Promise","all","map","param","title","release_date","genre_ids","id","poster_path","name","first_air_date","vote_average","listGenres","backdrop_path","$ef95d285b54824a0$export$d1804f076a27e43a","$ef95d285b54824a0$export$f32c0af4ea6694a5","concat","substring","parseFloat","toFixed","_ctx1","innerHTML","join","ids","$ef95d285b54824a0$var$_getGenresById","genres","arrGenres","getGenre","genre1","find","genre","$ef95d285b54824a0$var$_getUpcomingFilm","ref","formattedStartDate","formattedEndDate","$ef95d285b54824a0$var$getCurrentEndLastDayOfMonth","getUpcoming","$ef95d285b54824a0$var$renderUpcomingFilm","$ef95d285b54824a0$var$getRandomValue","insertAdjacentHTML","upcomingFilm","$ef95d285b54824a0$var$_renderUpcomingFilm","popularity","vote_count","overview","isMobile","imagePath","addToLib","window","innerWidth","$ef95d285b54824a0$var$getImagePath","getElementById","evt","$kaqNk","addFilmToStorage","addEventListener","backdropPath","posterPath","length","currentDate","Date","currentYear","getFullYear","currentMonth","String","getMonth","padStart","currentDay","getDate","nextMonthFirstDay","lastDayOfMonth","lastDayOfMonthFormatted","Math","floor","random","refs","footerLink","closeButton","backdropTeam"],"version":3,"file":"index.0f947693.js.map"}